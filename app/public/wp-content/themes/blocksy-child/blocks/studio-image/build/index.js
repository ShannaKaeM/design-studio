!function(){"use strict";var e=window.wp.blocks,t=window.wp.blockEditor,a=window.wp.components,l=window.wp.i18n,i=window.wp.icons,n=[{label:"Original",value:"original"},{label:"Square (1:1)",value:"1-1"},{label:"Landscape (16:9)",value:"16-9"},{label:"Portrait (9:16)",value:"9-16"},{label:"Wide (21:9)",value:"21-9"},{label:"Classic (4:3)",value:"4-3"},{label:"Tall (3:4)",value:"3-4"}],o=[{label:"Cover",value:"cover"},{label:"Contain",value:"contain"},{label:"Fill",value:"fill"},{label:"None",value:"none"}],r=[{label:"None",value:"none"},{label:"Grayscale",value:"grayscale"},{label:"Sepia",value:"sepia"},{label:"Blur",value:"blur"},{label:"Brightness",value:"brightness"},{label:"Contrast",value:"contrast"}],s=[{label:"None",value:"none"},{label:"Zoom In",value:"zoom-in"},{label:"Zoom Out",value:"zoom-out"},{label:"Rotate",value:"rotate"},{label:"Blur to Focus",value:"blur-focus"},{label:"Color to Grayscale",value:"color-grayscale"}],c=[{label:"None",value:"none"},{label:"Small",value:"small"},{label:"Medium",value:"medium"},{label:"Large",value:"large"},{label:"Round",value:"round"}],u=[{label:"Below Image",value:"below"},{label:"Overlay Bottom",value:"overlay-bottom"},{label:"Overlay Top",value:"overlay-top"},{label:"Overlay Center",value:"overlay-center"}],m=[{label:"Default",value:"default"},{label:"Dark Background",value:"dark-bg"},{label:"Light Background",value:"light-bg"},{label:"Gradient",value:"gradient"}],d=[{label:"None",value:"none"},{label:"Media File",value:"media"},{label:"Custom URL",value:"custom"}];(0,e.registerBlockType)("studio/image",{edit:function(e){var p=e.attributes,g=e.setAttributes,v=p.url,b=p.id,f=p.alt,y=p.caption,_=p.aspectRatio,h=p.objectFit,w=p.imageEffect,E=p.hoverEffect,k=p.borderRadius,C=p.captionPosition,x=p.captionStyle,R=p.linkTo,S=p.href,T=p.linkTarget,B=p.rel,I=p.lightbox,N=(0,t.useBlockProps)({className:"studio-image studio-image--aspect-".concat(_," studio-image--radius-").concat(k," studio-image--effect-").concat(w," studio-image--hover-").concat(E)}),P=function(e){g({url:e.url,id:e.id,alt:e.alt})},O=function(e){var t=e.children;if("none"===R||!v)return t;var a="media"===R?v:S;return React.createElement("a",{href:a,target:T,rel:B,onClick:function(e){return e.preventDefault()}},t)};return React.createElement(React.Fragment,null,React.createElement(t.BlockControls,null,React.createElement(a.ToolbarGroup,null,React.createElement(t.MediaUploadCheck,null,React.createElement(t.MediaUpload,{onSelect:P,allowedTypes:["image"],value:b,render:function(e){var t=e.open;return React.createElement(a.ToolbarButton,{icon:i.image,label:(0,l.__)("Replace Image","studio"),onClick:t,disabled:!v})}})),React.createElement(a.ToolbarButton,{icon:"none"!==R?i.link:i.linkOff,label:(0,l.__)("Link","studio"),onClick:function(){g({linkTo:"none"===R?"custom":"none"})},isActive:"none"!==R}))),React.createElement(t.InspectorControls,null,React.createElement(a.PanelBody,{title:(0,l.__)("Image Settings","studio")},React.createElement(a.TextControl,{label:(0,l.__)("Alt Text","studio"),value:f,onChange:function(e){return g({alt:e})},help:(0,l.__)("Describe the image for screen readers","studio")}),React.createElement(a.SelectControl,{label:(0,l.__)("Aspect Ratio","studio"),value:_,options:n,onChange:function(e){return g({aspectRatio:e})}}),"original"!==_&&React.createElement(a.SelectControl,{label:(0,l.__)("Object Fit","studio"),value:h,options:o,onChange:function(e){return g({objectFit:e})},help:(0,l.__)("How the image should fit within the aspect ratio","studio")}),React.createElement(a.SelectControl,{label:(0,l.__)("Border Radius","studio"),value:k,options:c,onChange:function(e){return g({borderRadius:e})}})),React.createElement(a.PanelBody,{title:(0,l.__)("Effects","studio"),initialOpen:!1},React.createElement(a.SelectControl,{label:(0,l.__)("Image Effect","studio"),value:w,options:r,onChange:function(e){return g({imageEffect:e})}}),React.createElement(a.SelectControl,{label:(0,l.__)("Hover Effect","studio"),value:E,options:s,onChange:function(e){return g({hoverEffect:e})}})),React.createElement(a.PanelBody,{title:(0,l.__)("Caption","studio"),initialOpen:!1},React.createElement(a.SelectControl,{label:(0,l.__)("Caption Position","studio"),value:C,options:u,onChange:function(e){return g({captionPosition:e})}}),C.includes("overlay")&&React.createElement(a.SelectControl,{label:(0,l.__)("Caption Style","studio"),value:x,options:m,onChange:function(e){return g({captionStyle:e})}})),React.createElement(a.PanelBody,{title:(0,l.__)("Link Settings","studio"),initialOpen:!1},React.createElement(a.SelectControl,{label:(0,l.__)("Link To","studio"),value:R,options:d,onChange:function(e){return g({linkTo:e})}}),"custom"===R&&React.createElement(React.Fragment,null,React.createElement(a.TextControl,{label:(0,l.__)("URL","studio"),value:S,onChange:function(e){return g({href:e})}}),React.createElement(a.ToggleControl,{label:(0,l.__)("Open in new tab","studio"),checked:"_blank"===T,onChange:function(e){g({linkTarget:e?"_blank":"",rel:e?"noopener":""})}})),"media"===R&&React.createElement(a.ToggleControl,{label:(0,l.__)("Enable Lightbox","studio"),checked:I,onChange:function(e){return g({lightbox:e})}}))),React.createElement("div",N,v?React.createElement("figure",{className:"studio-image__figure studio-image__caption-".concat(C," studio-image__caption-style-").concat(x)},React.createElement(O,null,React.createElement("div",{className:"studio-image__wrapper"},React.createElement("img",{src:v,alt:f,className:"studio-image__img",style:{objectFit:"original"!==_?h:void 0}}))),React.createElement(t.RichText,{tagName:"figcaption",className:"studio-image__caption",value:y,onChange:function(e){return g({caption:e})},placeholder:(0,l.__)("Write caption...","studio"),allowedFormats:["core/bold","core/italic","core/link"]})):React.createElement(t.MediaUploadCheck,null,React.createElement(t.MediaUpload,{onSelect:P,allowedTypes:["image"],value:b,render:function(e){var t=e.open;return React.createElement(a.Placeholder,{icon:i.image,label:(0,l.__)("Studio Image","studio"),instructions:(0,l.__)("Upload an image or pick one from your media library.","studio")},React.createElement(a.Button,{variant:"primary",onClick:t},(0,l.__)("Media Library","studio")))}}))))},save:function(e){var a=e.attributes,l=a.url,i=a.alt,n=a.caption,o=a.aspectRatio,r=a.objectFit,s=a.imageEffect,c=a.hoverEffect,u=a.borderRadius,m=a.captionPosition,d=a.captionStyle,p=a.linkTo,g=a.href,v=a.linkTarget,b=a.rel,f=a.lightbox,y=t.useBlockProps.save({className:"studio-image studio-image--aspect-".concat(o," studio-image--radius-").concat(u," studio-image--effect-").concat(s," studio-image--hover-").concat(c)});if(!l)return null;var _=React.createElement("div",{className:"studio-image__wrapper"},React.createElement("img",{src:l,alt:i,className:"studio-image__img",style:{objectFit:"original"!==o?r:void 0}})),h=function(e){var t=e.children;if("none"===p)return t;var a="media"===p?l:g,i=f?"studio-image__link studio-image__link--lightbox":"studio-image__link";return React.createElement("a",{href:a,target:v,rel:b,className:i,"data-lightbox":f?"true":void 0},t)};return React.createElement("div",y,React.createElement("figure",{className:"studio-image__figure studio-image__caption-".concat(m," studio-image__caption-style-").concat(d)},React.createElement(h,null,_),n&&React.createElement(t.RichText.Content,{tagName:"figcaption",className:"studio-image__caption",value:n})))}})}();
