(()=>{async function n(e){e.preventDefault(),e.stopPropagation();var e=e.currentTarget,t=(e.disabled=!0,e.dataset.lesson_id||0);let o=Number(e.dataset.next_lesson_id||0);var s=new FormData;s.append("security",portal_archive.mark_lesson_complete_nonce),s.append("lesson_id",t),s.append("course_id",e.dataset.course_id||0),s.append("next_lesson_id",o);let a=await sdApiFetch("suredash/v1/mark-lesson-complete","POST",s);a.success?(portalPushNotification("success",portal_global?.notification_messages?.lesson_complete),setTimeout(()=>{o?window.location.href=a.data.next_lesson_link:window.location.href=a.data.course_link},1e3)):portalPushNotification("error",a.data.message),e.disabled=!1}function r(e){e.preventDefault(),e.stopPropagation();var e=e.currentTarget.dataset.lessonId,t=new URL(window.location.href),o=new URLSearchParams(t.search),e=(o.has("sd-lesson")?o.set("sd-lesson",e):o.append("sd-lesson",e),""+t.origin+t.pathname+"?"+o.toString());window.location.href=e}var e;e=()=>{var e=document.querySelectorAll(".pp-course--section-header");e&&e.forEach(s=>{s.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var e=s?.closest(".pp-course--section"),t=[e];let o=e?.parentElement?.closest(".pp-course--section");for(;null!==o;)t.push(o),o=o?.parentElement?.closest(".pp-course--section");e.classList.toggle("pp-course-section-toggled")})});document.querySelectorAll("#portal-lesson-complete")?.forEach(e=>e?.addEventListener("click",n));var t,o,s,a,e=document.querySelector(".portal-item-title-area");e&&document.querySelector(".portal-pp-course-playlist-wrap")&&(t=(s=document.querySelector(".course-playlist-badge")).dataset.resumeLesson,o=s.dataset.startLesson,s=s.dataset.courseProgress,(a=document.createElement("button")).classList="portal-button button-primary portal-lesson-continue-button",a.id="portal-lesson-continue-button",a.textContent="0"!==s?"Resume Course":"Start Course",a.dataset.lessonId="0"!==t?t:o,a.addEventListener("click",r),e.appendChild(a))},document.addEventListener("DOMContentLoaded",e),"interactive"!==document.readyState&&"complete"!==document.readyState||e()})();