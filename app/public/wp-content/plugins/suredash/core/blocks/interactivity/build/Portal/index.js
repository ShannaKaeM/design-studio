(()=>{"use strict";const e=window.wp.blocks,t=window.wp.data,n=window.wp.element,o=window.wp.blockEditor,s=window.wp.components,r=window.wp.i18n;function l(n,s,r){const l=(0,t.useSelect)((t=>t(e.store).getActiveBlockVariation(r,s)?.name),[s]),a=`${r}/${l}`;return(0,t.useSelect)((e=>{if(!l)return!1;const{getBlockRootClientId:t,getPatternsByBlockTypes:s}=e(o.store),r=t(n);return s(a,r).length>0}),[n,l,a])?a:r}window.wp.coreData,window.wp.htmlEntities;const a=(e,n)=>(0,t.useSelect)((t=>{const{getBlockRootClientId:s,getPatternsByBlockTypes:r}=t(o.store),l=s(e);return r(n,l)}),[n,e]),c=window.ReactJSXRuntime,i=({openPatternSelectionModal:e,name:t,clientId:n})=>{const o=!!a(n,t).length;return(0,c.jsx)(c.Fragment,{children:o&&(0,c.jsx)(s.ToolbarGroup,{className:"wp-block-template-part__block-control-group",children:(0,c.jsx)(s.ToolbarButton,{onClick:e,children:(0,r.__)("Replace","suredash")})})})};function d({name:e,clientId:t,openPatternSelectionModal:n}){const s=(0,o.useBlockProps)({className:"sc-product-page__editor-container"}),r=(0,o.useInnerBlocksProps)(s,{renderAppender:o.InnerBlocks.ButtonBlockAppender});return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(o.BlockControls,{children:(0,c.jsx)(i,{name:e,clientId:t,openPatternSelectionModal:n})}),(0,c.jsx)("div",{...r})]})}function u({attributes:n,clientId:a,name:i,openPatternSelectionModal:d}){const u=(0,o.useBlockProps)(),p=l(a,n,i),{blockType:h,activeBlockVariation:k,hasPatterns:m}=(0,t.useSelect)((t=>{const{getActiveBlockVariation:s,getBlockType:r}=t(e.store),{getBlockRootClientId:l,getPatternsByBlockTypes:c}=t(o.store),d=l(a);return{blockType:r(i),activeBlockVariation:s(i,n),hasPatterns:!!c(p,d).length}}),[i,p,a,n]),w=k?.icon?.src||k?.icon||h?.icon?.src,B=k?.title||h?.title;return(0,c.jsx)("div",{...u,children:(0,c.jsx)(s.Placeholder,{icon:w,label:B,instructions:(0,r.__)("Choose a pattern for the portal & kickstart your community building journey.","suredash"),children:!!m&&(0,c.jsx)(s.Button,{variant:"primary",onClick:d,children:(0,r.__)("Choose","suredash")})})})}const p=window.wp.compose;function h({clientId:i,attributes:d,setIsPatternSelectionModalOpen:u,name:h}){const[k,m]=(0,n.useState)(""),{replaceBlock:w,selectBlock:B}=(0,t.useDispatch)(o.store),x=(0,n.useMemo)((()=>({previewPostType:"portal"})),["portal"]),_=l(i,d,h),b=a(i,_),g=(0,n.useMemo)((()=>function(e=[],t=""){if(!t)return e;const n=e.map((e=>[e,getPatternSearchRank(e,t)])).filter((([,e])=>e>0));return n.sort((([,e],[,t])=>t-e)),n.map((([e])=>e))}(b,k)),[b,k]),j=(0,p.useAsyncList)(g);return(0,c.jsx)(s.Modal,{overlayClassName:"block-library-query-pattern__selection-modal",title:(0,r.__)("Choose a pattern","suredash"),onRequestClose:()=>u(!1),isFullScreen:!0,children:(0,c.jsxs)("div",{className:"block-library-query-pattern__selection-content",children:[(0,c.jsx)("div",{className:"block-library-query-pattern__selection-search",children:(0,c.jsx)(s.SearchControl,{__nextHasNoMarginBottom:!0,onChange:m,value:k,label:(0,r.__)("Search for patterns","suredash"),placeholder:(0,r.__)("Search","suredash")})}),(0,c.jsx)(o.BlockContextProvider,{value:x,children:(0,c.jsx)(o.__experimentalBlockPatternsList,{blockPatterns:g,shownPatterns:j,onClickPattern:(t,n)=>{const{newBlocks:o,queryClientIds:s}=((t,n,o)=>{const{namespace:s}=n,r=t.map((t=>(0,e.cloneBlock)(t))),l=[],a=[...r];for(;a.length>0;){const e=a.shift();e.name===o&&(s&&(e.attributes.namespace=s),l.push(e.clientId)),e.innerBlocks?.forEach((e=>{a.push(e)}))}return{newBlocks:r,queryClientIds:l}})(n,d,h);w(i,o),s[0]&&B(s[0])}})})]})})}const k=JSON.parse('{"UU":"suredash/portal"}');(0,e.registerBlockType)(k.UU,{icon:(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-house",style:{fill:"none",width:"16px"},children:[(0,c.jsx)("path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"}),(0,c.jsx)("path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"})]}),edit:e=>{const{clientId:l,attributes:a,setAttributes:i,name:p}=e,{sidebartopoffset:k}=a,[m,w]=(0,n.useState)(!1),B=(0,t.useSelect)((e=>!!e(o.store).getBlocks(l).length),[l])?d:u;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(B,{...e,openPatternSelectionModal:()=>w(!0)}),(0,c.jsx)(o.InspectorControls,{children:(0,c.jsxs)(s.PanelBody,{children:[(0,c.jsx)(o.__experimentalUnitControl,{label:(0,r.__)("Sidebar Top Offset","suredash"),__unstableInputWidth:"100px",value:k,onChange:e=>i({sidebartopoffset:e})}),(0,c.jsx)(s.Notice,{status:"info",className:"suredash-block-settings-notice",isDismissible:!1,children:(0,r.__)("Set the top offset for the sticky sidebar to ensure it stays in place and provides a smooth scrolling experience.","suredash")})]})}),m&&(0,c.jsx)(h,{clientId:l,attributes:a,setIsPatternSelectionModalOpen:w,name:p})]})},save:function(){return(0,c.jsx)(o.InnerBlocks.Content,{})}})})();