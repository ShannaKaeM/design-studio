"use strict";(globalThis.webpackChunksuremembers=globalThis.webpackChunksuremembers||[]).push([[6737],{403:(e,t,i)=>{i.d(t,{i:()=>n,m:()=>s,z:()=>r});const r=["bif","byr","clp","djf","gnf","isk","jpy","kmf","krw","pyg","rwf","ugx","vnd","vuv","xaf","xag","xau","xba","xbb","xbc","xbd","xdr","xof","xpd","xpf","xpt","xts"],s=(e,t)=>n(t)?e:e/100,n=e=>{var t;return r.includes(null===(t=null==e?void 0:e.toLowerCase)||void 0===t?void 0:t.call(e))}},6338:(e,t,i)=>{i.d(t,{a:()=>p,b:()=>v,c:()=>a,d:()=>o,g:()=>n,i:()=>u,p:()=>h,t:()=>c});var r=i(3659),s=i(403);const n=e=>(null==e?void 0:e.amount_off)&&(null==e?void 0:e.currency)?a({amount:e.amount_off,currency:e.currency}):(null==e?void 0:e.percent_off)?(0,r.s)((0,r._)("%1d%% off","surecart"),0|e.percent_off):"",a=({amount:e,currency:t})=>{const i=((e,t)=>s.z.includes(t)?e:e/100)(e,t);return`${new Intl.NumberFormat(void 0,{style:"currency",currency:t}).format(parseFloat(i.toFixed(2)))}`},o=(e="usd")=>{var t;return null===(t=new Intl.NumberFormat(void 0,{style:"currency",currency:e}).formatToParts().find((e=>"currency"===e.type)))||void 0===t?void 0:t.value},c=(e,t,i=(0,r._)("every","surecart"),s=(0,r._)("once","surecart"),n=!1)=>{switch(t){case"day":return`${i} ${(0,r.s)(n?(0,r.a)("%d day","%d days",e,"surecart"):(0,r.a)("day","%d days",e,"surecart"),e)}`;case"week":return`${i} ${(0,r.s)(n?(0,r.a)("%d week","%d weeks",e,"surecart"):(0,r.a)("week","%d weeks",e,"surecart"),e)}`;case"month":return`${i} ${(0,r.s)(n?(0,r.a)("%d month","%d months",e,"surecart"):(0,r.a)("month","%d months",e,"surecart"),e)}`;case"year":return`${i} ${(0,r.s)(n?(0,r.a)("%d year","%d years",e,"surecart"):(0,r.a)("year","%d years",e,"surecart"),e)}`;default:return s}},u=(e,t={})=>{if(!e)return"";const{showOnce:i,labels:s,abbreviate:n}=t,{interval:a=(0,r._)("every","surecart")}=s||{};return`${l(e,a,i?(0,r._)("once","surecart"):"",n)} ${d(e,n)}`},l=(e,t,i=(0,r._)("once","surecart"),s=!1)=>e.recurring_interval_count&&e.recurring_interval&&1!==(null==e?void 0:e.recurring_period_count)?s?((e,t,i=(0,r._)("once","surecart"),s=!1)=>{switch(t){case"day":return` / ${(0,r.s)(s?(0,r.a)("%d day","%d days",e,"surecart"):(0,r.a)("day","%d days",e,"surecart"),e)}`;case"week":return` / ${(0,r.s)(s?(0,r.a)("%d wk","%d wks",e,"surecart"):(0,r.a)("wk","%d wks",e,"surecart"),e)}`;case"month":return` / ${(0,r.s)(s?(0,r.a)("%d mo","%d months",e,"surecart"):(0,r.a)("mo","%d mos",e,"surecart"),e)}`;case"year":return` / ${(0,r.s)(s?(0,r.a)("%d yr","%d yrs",e,"surecart"):(0,r.a)("yr","%d yrs",e,"surecart"),e)}`;default:return i}})(e.recurring_interval_count,e.recurring_interval,i):c(e.recurring_interval_count,e.recurring_interval,` ${t}`,i):"",d=(e,t=!1)=>(null==e?void 0:e.recurring_period_count)&&1!==(null==e?void 0:e.recurring_period_count)?t?`x ${e.recurring_period_count}`:` (${(0,r.s)((0,r.a)("%d payment","%d payments",e.recurring_period_count,"surecart"),e.recurring_period_count)})`:"",p=e=>(0,r.s)((0,r.a)("%d payment remaining","%d payments remaining",e,"surecart"),e),h=e=>{var t;return e?`${null===(t=null==e?void 0:e.product)||void 0===t?void 0:t.name} ${(null==e?void 0:e.name)?`â€” ${e.name}`:""}`:""},v=e=>{switch(e){case"invalid":return(0,r._)("Not valid","surecart");case"expired":return(0,r._)("Expired","surecart");case"gone":return(0,r._)("Not available","surecart");case"less_than_min_subtotal_amount":return(0,r._)("Minimum not met","surecart");case"not_applicable":return(0,r._)("Product(s) not eligible","surecart");case"not_applicable_to_customer":return(0,r._)("Not eligible","surecart");case"":return"";default:return(0,r._)("Not redeemable","surecart")}}},6737:(e,t,i)=>{i.r(t),i.d(t,{sc_subscription_details:()=>l,sc_subscription_status_badge:()=>d});var r=i(4589),s=i(3659),n=i(9964),a=i(6338),o=(i(7808),i(2538));function c(e,t={timeStyle:"medium",dateStyle:"full"},i=[]){return new Intl.DateTimeFormat(i,t).format(new Date(1e3*e))}i(857);const u=(e,t="")=>new Intl.NumberFormat([],{style:"currency",currency:t.toUpperCase(),currencyDisplay:"symbol"}).format(((e,t)=>["BIF","BYR","CLP","DJF","GNF","ISK","JPY","KMF","KRW","PYG","RWF","UGX","VND","VUV","XAF","XAG","XAU","XBA","XBB","XBC","XBD","XDR","XOF","XPD","XPF","XPT","XTS"].includes(t.toUpperCase())?e:e/100)(e,t.toUpperCase())),l=class{constructor(e){(0,r.r)(this,e),this.subscription=void 0,this.pendingPrice=void 0,this.hideRenewalText=void 0,this.activationsModal=void 0,this.loading=void 0,this.hasPendingUpdate=void 0}renderName(){var e,t,i;return"string"!=typeof(null===(t=null===(e=this.subscription)||void 0===e?void 0:e.price)||void 0===t?void 0:t.product)?(0,a.p)(null===(i=this.subscription)||void 0===i?void 0:i.price):(0,s._)("Subscription","surecart")}async handleSubscriptionChange(){var e,t,i,r;this.hasPendingUpdate=!!(null===(t=Object.keys((null===(e=null==this?void 0:this.subscription)||void 0===e?void 0:e.pending_update)||{}))||void 0===t?void 0:t.length),!(null===(r=null===(i=null==this?void 0:this.subscription)||void 0===i?void 0:i.pending_update)||void 0===r?void 0:r.price)||(null==this?void 0:this.pendingPrice)||this.hideRenewalText||(this.pendingPrice=await this.fetchPrice(this.subscription.pending_update.price))}componentWillLoad(){this.handleSubscriptionChange()}async fetchPrice(e){try{return this.loading=!0,await(0,n.a)({path:(0,o.a)(`surecart/v1/prices/${e}`,{expand:["product"]})})}catch(e){console.error(e)}finally{this.loading=!1}}renderRenewalText(){var e,t,i,n,o,l,d,p,h,v,_,m,g,b,y,f,w,x,P,k,$,C,T,U;const F=(0,r.h)("sc-subscription-status-badge",{subscription:null==this?void 0:this.subscription});return(null===(e=null==this?void 0:this.subscription)||void 0===e?void 0:e.cancel_at_period_end)&&(null===(t=null==this?void 0:this.subscription)||void 0===t?void 0:t.current_period_end_at)?(0,r.h)("span",{"aria-label":(0,s.s)((0,s._)("Renewal Update - Your plan will be canceled on %s","surecart"),c(this.subscription.current_period_end_at))},F," ",(0,s.s)((0,s._)("Your plan will be canceled on","surecart"))," ",(0,r.h)("sc-format-date",{date:1e3*this.subscription.current_period_end_at,month:"long",day:"numeric",year:"numeric"})):this.hasPendingUpdate?this.pendingPrice||(null===(n=null===(i=this.subscription)||void 0===i?void 0:i.pending_update)||void 0===n?void 0:n.ad_hoc_amount)?(null===(l=null===(o=this.subscription)||void 0===o?void 0:o.pending_update)||void 0===l?void 0:l.ad_hoc_amount)?(0,r.h)("span",{"aria-label":(0,s.s)((0,s._)("Renewal Update - Your plan switches to %1s on %2s","surecart"),u(null===(p=null===(d=this.subscription)||void 0===d?void 0:d.pending_update)||void 0===p?void 0:p.ad_hoc_amount,(null===(h=this.pendingPrice)||void 0===h?void 0:h.currency)||(null===(_=null===(v=this.subscription)||void 0===v?void 0:v.price)||void 0===_?void 0:_.currency)),c(this.subscription.current_period_end_at))},(0,s._)("Your plan switches to","surecart")," ",(0,r.h)("strong",null,(0,r.h)("sc-format-number",{type:"currency",currency:(null===(m=this.pendingPrice)||void 0===m?void 0:m.currency)||(null===(b=null===(g=this.subscription)||void 0===g?void 0:g.price)||void 0===b?void 0:b.currency),value:null===(f=null===(y=this.subscription)||void 0===y?void 0:y.pending_update)||void 0===f?void 0:f.ad_hoc_amount})," ",(0,a.i)(this.pendingPrice||(null===(w=this.subscription)||void 0===w?void 0:w.price)))," ",(0,s._)("on","surecart")," ",(0,r.h)("sc-format-date",{date:this.subscription.current_period_end_at,type:"timestamp",month:"long",day:"numeric",year:"numeric"})):(0,r.h)("span",{"aria-label":(0,s.s)((0,s._)("Renewal Update - Your plan switches to %1s on %2s","surecart"),this.pendingPrice.product.name,c(this.subscription.current_period_end_at))},(0,s._)("Your plan switches to","surecart")," ",(0,r.h)("strong",null,this.pendingPrice.product.name)," ",(0,s._)("on","surecart")," ",(0,r.h)("sc-format-date",{date:this.subscription.current_period_end_at,type:"timestamp",month:"long",day:"numeric",year:"numeric"})):(0,r.h)("sc-skeleton",null):"trialing"===(null===(x=null==this?void 0:this.subscription)||void 0===x?void 0:x.status)&&(null===(P=null==this?void 0:this.subscription)||void 0===P?void 0:P.trial_end_at)?(0,r.h)("span",{"aria-label":(0,s.s)((0,s._)("Renewal Update - Your plan begins on %s.","surecart"),c(this.subscription.trial_end_at))},F," ",(0,s.s)((0,s._)("Your plan begins on","surecart"))," ",(0,r.h)("sc-format-date",{date:null===(k=null==this?void 0:this.subscription)||void 0===k?void 0:k.trial_end_at,type:"timestamp",month:"long",day:"numeric",year:"numeric"})):"active"===(null===($=this.subscription)||void 0===$?void 0:$.status)&&(null===(C=this.subscription)||void 0===C?void 0:C.current_period_end_at)?(0,r.h)("span",{"aria-label":(0,s.s)((0,s._)("Renewal Update - Your next payment is on %s","surecart"),c(this.subscription.current_period_end_at))},F," ",null===(null===(T=this.subscription)||void 0===T?void 0:T.remaining_period_count)?(0,s._)("Your plan renews on","surecart"):(0,s._)("Your next payment is on","surecart")," ",(0,r.h)("sc-format-date",{date:null===(U=null==this?void 0:this.subscription)||void 0===U?void 0:U.current_period_end_at,type:"timestamp",month:"long",day:"numeric",year:"numeric"})):F}getActivations(){var e,t,i,r;return((null===(r=null===(i=null===(t=null===(e=this.subscription)||void 0===e?void 0:e.purchase)||void 0===t?void 0:t.license)||void 0===i?void 0:i.activations)||void 0===r?void 0:r.data)||[]).filter((e=>null==e?void 0:e.counted))}renderActivations(){var e;const t=this.getActivations();return(null==t?void 0:t.length)?(0,r.h)("sc-flex",{justifyContent:"flex-start",alignItems:"center"},(0,r.h)("sc-tag",{size:"small"},null===(e=null==t?void 0:t[0])||void 0===e?void 0:e.name),(null==t?void 0:t.length)>1&&(0,r.h)("sc-text",{style:{"--font-size":"var(--sc-font-size-small)",cursor:"pointer"},onClick:e=>{e.preventDefault(),e.stopImmediatePropagation(),this.activationsModal=!0}},"+ ",(null==t?void 0:t.length)-1," More")):null}showWarning(){var e,t,i,r,s,n,a;return!(null===(e=this.subscription)||void 0===e?void 0:e.payment_method)&&!!["active","past_due","unpaid","incomplete"].includes(null===(t=this.subscription)||void 0===t?void 0:t.status)&&((null===(r=null===(i=this.subscription)||void 0===i?void 0:i.price)||void 0===r?void 0:r.ad_hoc)?0!==(null===(s=this.subscription)||void 0===s?void 0:s.ad_hoc_amount):0!==(null===(a=null===(n=this.subscription)||void 0===n?void 0:n.price)||void 0===a?void 0:a.amount))}render(){return(0,r.h)("div",{class:"subscription-details"},this.hasPendingUpdate&&(0,r.h)("div",null,(0,r.h)("sc-tag",{size:"small",type:"warning"},(0,s._)("Update Scheduled","surecart"))),(0,r.h)("sc-flex",{alignItems:"center",justifyContent:"flex-start"},(0,r.h)("sc-text",{"aria-label":(0,s.s)((0,s._)("Plan name - %s","surecart"),this.renderName()),style:{"--font-weight":"var(--sc-font-weight-bold)"}},this.renderName()),this.renderActivations()),!this.hideRenewalText&&(0,r.h)("div",null,this.renderRenewalText()," "),(0,r.h)("slot",null),(0,r.h)("sc-dialog",{label:(0,s._)("Activations","surecart"),onScRequestClose:()=>this.activationsModal=!1,open:!!this.activationsModal},(0,r.h)("sc-card",{"no-padding":!0,style:{"--overflow":"hidden"}},(0,r.h)("sc-stacked-list",null,(this.getActivations()||[]).map((e=>(0,r.h)("sc-stacked-list-row",{style:{"--columns":"2"},mobileSize:0},(0,r.h)("sc-text",{style:{"--line-height":"var(--sc-line-height-dense)"}},(0,r.h)("strong",null,null==e?void 0:e.name),(0,r.h)("div",null,(0,r.h)("sc-text",{style:{"--color":"var(--sc-color-gray-500)"}},null==e?void 0:e.fingerprint))),(0,r.h)("sc-text",{style:{"--color":"var(--sc-color-gray-500)"}},(0,r.h)("sc-format-date",{type:"timestamp",month:"short",day:"numeric",year:"numeric",date:null==e?void 0:e.created_at})))))))),this.showWarning()&&(0,r.h)("div",null,(0,r.h)("sc-tag",{type:"warning"},(0,r.h)("div",{class:"subscription-details__missing-method"},(0,r.h)("sc-icon",{name:"alert-triangle"}),(0,s._)("Payment Method Missing","surecart")))))}static get watchers(){return{subscription:["handleSubscriptionChange"]}}};l.style=":host{display:block}.subscription-details{display:grid;gap:0.25em;color:var(--sc-input-label-color)}.subscription-details__missing-method{display:flex;align-items:center;gap:var(--sc-spacing-x-small)}";const d=class{constructor(e){(0,r.r)(this,e),this.status=void 0,this.subscription=void 0,this.size="medium",this.pill=!1,this.clearable=!1}getType(){var e,t,i;if(null===(e=this.subscription)||void 0===e?void 0:e.cancel_at_period_end)return"info";switch(this.status||(null===(t=this.subscription)||void 0===t?void 0:t.status)){case"incomplete":case"past_due":case"unpaid":return"warning";case"trialing":return"info";case"active":case"completed":return"success";case"canceled":return(null===(i=this.subscription)||void 0===i?void 0:i.restore_at)?"info":"danger"}}getText(){var e,t,i,n,a;if((null===(e=this.subscription)||void 0===e?void 0:e.cancel_at_period_end)&&this.subscription.current_period_end_at&&"canceled"!==(null===(t=this.subscription)||void 0===t?void 0:t.status))return(0,r.h)(r.F,null,(null===(i=this.subscription)||void 0===i?void 0:i.restore_at)?(0,s._)("Pauses","surecart"):(0,s._)("Cancels","surecart")," ",(0,r.h)("sc-format-date",{type:"timestamp",date:this.subscription.current_period_end_at,month:"short",day:"numeric"}));switch(this.status||(null===(n=this.subscription)||void 0===n?void 0:n.status)){case"incomplete":return(0,s._)("Incomplete","surecart");case"trialing":return(0,s._)("Trialing","surecart");case"active":return(0,s._)("Active","surecart");case"past_due":return(0,s._)("Past Due","surecart");case"canceled":return(null===(a=this.subscription)||void 0===a?void 0:a.restore_at)?"Paused":(0,s._)("Canceled","surecart");case"completed":return(0,s._)("Completed","surecart");case"unpaid":return(0,s._)("Unpaid","surecart")}}render(){return(0,r.h)("sc-tag",{"aria-label":(0,s.s)((0,s._)("Plan Status - %s","surecart"),this.getText()),type:this.getType()},this.getText())}};d.style=":host{display:inline-block}"}}]);