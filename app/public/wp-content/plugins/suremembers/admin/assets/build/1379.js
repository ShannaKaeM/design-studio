"use strict";(globalThis.webpackChunksuremembers=globalThis.webpackChunksuremembers||[]).push([[1379],{3167:(e,i,t)=>{t.d(i,{a:()=>l,c:()=>d,g:()=>n,h:()=>r,i:()=>s});const d=e=>((null==e?void 0:e.data)||[]).map((e=>({...(null==e?void 0:e.id)?{id:e.id}:{},price_id:e.price.id,quantity:e.quantity}))),n=(e,i)=>((null==e?void 0:e.data)||[]).find((e=>e.price.id===i)),s=(e,i)=>{var t;return!!((null==(t=null==i?void 0:i.line_items)?void 0:t.data)||[]).map((e=>e.price.id)).find((i=>(null==e?void 0:e.id)===i))},l=(e,i)=>{var t;return!!((null==(t=null==i?void 0:i.line_items)?void 0:t.data)||[]).map((e=>{var i;return(null===(i=null==e?void 0:e.bump)||void 0===i?void 0:i.id)||(null==e?void 0:e.bump)})).find((i=>(null==e?void 0:e.id)===i))},r=e=>{var i,t,d;return!!(null===(t=null===(i=null==e?void 0:e.line_items)||void 0===i?void 0:i.data)||void 0===t?void 0:t.length)&&(null===(d=null==e?void 0:e.line_items.data)||void 0===d?void 0:d.some((e=>{var i;return null===(i=null==e?void 0:e.price)||void 0===i?void 0:i.recurring_interval_count})))}},1379:(e,i,t)=>{t.r(i),t.d(i,{sc_line_items_provider:()=>s});var d=t(4589),n=t(3167);const s=class{constructor(e){(0,d.r)(this,e),this.scUpdateLineItems=(0,d.c)(this,"scUpdateLineItems",7),this.order=void 0,this.syncItems=[]}handleLineItemToggle(e){const i=e.detail;this.addSyncItem("toggle",i)}handleLineItemRemove(e){const i=e.detail;this.addSyncItem("remove",i)}handleLineItemAdd(e){const i=e.detail;this.addSyncItem("add",i)}handleLineItemUpdate(e){const i=e.detail;this.addSyncItem("update",i)}async syncItemsHandler(e){(null==e?void 0:e.length)&&setTimeout((()=>{var e;if(!(null===(e=this.syncItems)||void 0===e?void 0:e.length))return;const i=this.processSyncItems();this.scUpdateLineItems.emit(i),this.syncItems=[]}),100)}addSyncItem(e,i){this.syncItems=[...this.syncItems,{type:e,payload:i}]}processSyncItems(){var e;let i=(0,n.c)((null===(e=null==this?void 0:this.order)||void 0===e?void 0:e.line_items)||[]);const t={toggle:this.toggleItem,add:this.addItem,remove:this.removeItem,update:this.updateItem};return(this.syncItems||[]).forEach((e=>{i=t[e.type](e.payload,i)})),i}addItem(e,i){return[...i,e]}toggleItem(e,i){var t;const d=null===(t=i.find((i=>i.price_id===e.price_id)))||void 0===t?void 0:t.price_id;return d?i.filter((e=>d!==e.price_id)):[...i,e]}removeItem(e,i){return e.price_id?i.filter((i=>i.price_id!==e.price_id)):i}updateItem(e,i){const t=i.findIndex((i=>i.price_id===e.price_id));return-1===t?[...i,e]:(i[t]=e,i)}render(){return(0,d.h)("slot",null)}static get watchers(){return{syncItems:["syncItemsHandler"]}}}}}]);