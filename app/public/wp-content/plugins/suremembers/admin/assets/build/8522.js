"use strict";(globalThis.webpackChunksuremembers=globalThis.webpackChunksuremembers||[]).push([[8522],{3524:(i,o,e)=>{e.d(o,{a:()=>g,b:()=>s,c:()=>p,d:()=>m,e:()=>u,f:()=>_,g:()=>v,r:()=>w,u:()=>y});var t=e(1874),d=e(9964),a=e(3659),n=e(2538),l=e(5792);const s="surecart/v1/checkouts/",u=["line_items","line_item.price","line_item.fees","line_item.variant","variant.image","price.product","product.featured_product_media","product.product_collections","product_media.media","customer","customer.shipping_address","payment_intent","discount","discount.promotion","recommended_bumps","bump.price","current_upsell","product.variants","discount.coupon","shipping_address","tax_identifier","manual_payment_method","shipping_choices","shipping_choice.shipping_method"],c=(i={})=>{var o,e,d,a,n,l;return{live_mode:"test"!==t.s.mode,group_key:t.s.groupId,abandoned_checkout_enabled:t.s.abandonedCheckoutEnabled,metadata:{...(null==i?void 0:i.metadata)||{},...(null===(o=null===window||void 0===window?void 0:window.scData)||void 0===o?void 0:o.page_id)&&{page_id:null===(e=null===window||void 0===window?void 0:window.scData)||void 0===e?void 0:e.page_id},...(null===(d=null===t.s||void 0===t.s?void 0:t.s.product)||void 0===d?void 0:d.id)&&{buy_page_product_id:null===(a=null===t.s||void 0===t.s?void 0:t.s.product)||void 0===a?void 0:a.id},page_url:window.location.href},...(null===(n=null===t.s||void 0===t.s?void 0:t.s.checkout)||void 0===n?void 0:n.email)&&{email:null===(l=null===t.s||void 0===t.s?void 0:t.s.checkout)||void 0===l?void 0:l.email},...i}},r=(i={})=>{var o,e;return{...!!(null===t.s||void 0===t.s?void 0:t.s.formId)&&{form_id:null===t.s||void 0===t.s?void 0:t.s.formId},...!!(null===(o=null===t.s||void 0===t.s?void 0:t.s.product)||void 0===o?void 0:o.id)&&{product_id:null===(e=null===t.s||void 0===t.s?void 0:t.s.product)||void 0===e?void 0:e.id},...i}},h=(i,o="")=>{let e=i?`${s}${i}`:s;return e=`${e}${o}`,(0,n.a)(e,{expand:u})},v=async({id:i,query:o={}})=>await(0,d.a)({path:(0,n.a)(h(i),r(o))}),p=async({id:i=null,data:o={},query:e={}})=>{var a,s;return i=i||(0,l.g)(window.location.href,"checkout_id")||((null===(a=null===t.s||void 0===t.s?void 0:t.s.checkout)||void 0===a?void 0:a.id)?null===(s=null===t.s||void 0===t.s?void 0:t.s.checkout)||void 0===s?void 0:s.id:null),await(0,d.a)({method:i?"PATCH":"POST",path:(0,n.a)(h(i),r(e)),data:c(o)})},m=async({id:i,data:o={},query:e={}})=>await(0,d.a)({method:"PATCH",path:(0,n.a)(h(i),r(e)),data:c(o)}),_=async({id:i,data:o={},query:e={},processor:t})=>await(0,d.a)({method:"POST",path:(0,n.a)(h(i,"/finalize"),r({...(null==t?void 0:t.manual)?{manual_payment:!0,manual_payment_method_id:null==t?void 0:t.id}:{processor_type:null==t?void 0:t.id},...e})),data:c(o)}),g=async({checkout:i,data:o,live_mode:e=!1})=>{var t;const a=((null===(t=null==i?void 0:i.line_items)||void 0===t?void 0:t.data)||[]).find((i=>{var e;return(null===(e=null==i?void 0:i.variant)||void 0===e?void 0:e.id)?i.variant.id===o.variant&&i.price.id===o.price:i.price.id===o.price}));if(!(null==i?void 0:i.id))return await(0,d.a)({method:"POST",path:(0,n.a)(h(null)),data:{line_items:[o],live_mode:e}});if(a)return await y({id:null==a?void 0:a.id,data:{...o,quantity:(null==a?void 0:a.quantity)+(null==o?void 0:o.quantity)}});const l=await(0,d.a)({path:(0,n.a)(`surecart/v1/line_items/${(null==a?void 0:a.id)?null==a?void 0:a.id:""}`,{consolidate:!0,expand:[...(u||[]).map((i=>i.includes(".")?i:`checkout.${i}`)),"checkout"]}),method:"POST",data:{...o,checkout:i.id}});return null==l?void 0:l.checkout},w=async({checkoutId:i,itemId:o})=>{const{deleted:e}=await(0,d.a)({path:`surecart/v1/line_items/${o}`,method:"DELETE"});if(!e)throw{code:"error",message:(0,a._)("Failed to delete","surecart")};return await v({id:i})},y=async({id:i,data:o})=>{const e=await(0,d.a)({path:(0,n.a)(`surecart/v1/line_items/${i}`,{expand:[...(u||[]).map((i=>i.includes(".")?i:`checkout.${i}`)),"checkout"]}),method:"PATCH",data:o});return null==e?void 0:e.checkout}},8522:(i,o,e)=>{e.r(o),e.d(o,{sc_customer_name:()=>s});var t=e(4589),d=e(3524),a=e(3876),n=e(1874),l=e(7421);e(9964),e(3659),e(857),e(2574),e(8445),e(7808);const s=class{constructor(i){(0,t.r)(this,i),this.scInput=(0,t.c)(this,"scInput",7),this.scFocus=(0,t.c)(this,"scFocus",7),this.scBlur=(0,t.c)(this,"scBlur",7),this.size="medium",this.value=null,this.pill=!1,this.label=void 0,this.showLabel=!0,this.help="",this.placeholder=void 0,this.disabled=!1,this.readonly=!1,this.required=!1,this.invalid=!1,this.autofocus=void 0,this.hasFocus=void 0}async reportValidity(){return this.input.reportValidity()}async handleChange(){this.value=this.input.value;try{n.s.checkout=await(0,d.c)({id:n.s.checkout.id,data:{name:this.input.value}})}catch(i){console.error(i)}}handleSessionChange(){var i,o,e,t,d,s;if(this.value)return;const u=(0,l.a)("full_name");a.s.loggedIn||!u?a.s.loggedIn?this.value=(null===(o=null===(i=null===n.s||void 0===n.s?void 0:n.s.checkout)||void 0===i?void 0:i.customer)||void 0===o?void 0:o.name)||(null===(e=null===n.s||void 0===n.s?void 0:n.s.checkout)||void 0===e?void 0:e.name):this.value=(null===(t=null===n.s||void 0===n.s?void 0:n.s.checkout)||void 0===t?void 0:t.name)||(null===(s=null===(d=null===n.s||void 0===n.s?void 0:n.s.checkout)||void 0===d?void 0:d.customer)||void 0===s?void 0:s.name):this.value=u}componentWillLoad(){this.handleSessionChange(),this.removeCheckoutListener=(0,n.o)("checkout",(()=>this.handleSessionChange()))}disconnectedCallback(){this.removeCheckoutListener()}render(){return(0,t.h)("sc-input",{type:"text",name:"name",ref:i=>this.input=i,value:this.value,label:this.label,help:this.help,autocomplete:"name",placeholder:this.placeholder,readonly:this.readonly,required:this.required,invalid:this.invalid,autofocus:this.autofocus,hasFocus:this.hasFocus,onScChange:()=>this.handleChange(),onScInput:()=>this.scInput.emit(),onScFocus:()=>this.scFocus.emit(),onScBlur:()=>this.scBlur.emit()})}};s.style=":host{display:block}"},3876:(i,o,e)=>{e.d(o,{s:()=>n});var t=e(2574),d=e(4904);const{user:a}=(0,d.g)(),{state:n,onChange:l,dispose:s}=(0,t.c)({loggedIn:!1,email:"",name:"",...a})},7421:(i,o,e)=>{e.d(o,{a:()=>d,b:()=>t,g:()=>n,i:()=>l,s:()=>a});const t=i=>{let o;try{o=new URL(i)}catch(i){return!1}return"http:"===o.protocol||"https:"===o.protocol},d=i=>{const o=window.location.search;return new URLSearchParams(o).get(i)},a=(i,o,e)=>(i||[]).sort(((i,t)=>-1===e.indexOf(null==i?void 0:i[o])?1:-1===e.indexOf(null==t?void 0:t[o])?-1:e.indexOf(null==i?void 0:i[o])-e.indexOf(null==t?void 0:t[o]))),n=({variants:i,values:o})=>{const e=Object.keys(o);for(const t of i){const i=["option_1","option_2","option_3"].map((i=>t[i])).filter((i=>null!=i));if((null==i?void 0:i.length)===(null==e?void 0:e.length)&&e.every((e=>i.includes(o[e]))))return t}return null},l=(i,o)=>{const e=parseInt(i);return!(o&&((null==o?void 0:o.ad_hoc_max_amount)||(null==o?void 0:o.ad_hoc_min_amount))&&((null==o?void 0:o.ad_hoc_max_amount)&&e>(null==o?void 0:o.ad_hoc_max_amount)||(null==o?void 0:o.ad_hoc_min_amount)&&e<(null==o?void 0:o.ad_hoc_min_amount)))}}}]);