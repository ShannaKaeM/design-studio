/*! For license information please see 2685.js.LICENSE.txt */
"use strict";(globalThis.webpackChunksuremembers=globalThis.webpackChunksuremembers||[]).push([[2685],{2286:(t,n,i)=>{i.d(n,{a:()=>a,c:()=>o,f:()=>d,g:()=>r,s:()=>u});var e=i(1874);const o=()=>(0,e.g)(e.s.formId,e.s.mode),a=(t="")=>{var n;return t?e.s.locks.some((n=>n===t)):!!(null===(n=e.s.locks)||void 0===n?void 0:n.length)},r=t=>{var n,i;return((null===(i=null===(n=e.s.checkout)||void 0===n?void 0:n.line_items)||void 0===i?void 0:i.data)||[]).find((n=>{var i,e;return(null===(e=null===(i=null==n?void 0:n.price)||void 0===i?void 0:i.product)||void 0===e?void 0:e.id)===t}))},d=()=>{var t,n;return(null===(t=e.s.checkout)||void 0===t?void 0:t.shipping_enabled)||(null===(n=null===e.s||void 0===e.s?void 0:e.s.checkout)||void 0===n?void 0:n.shipping_address_required)},u=()=>{var t,n,i,o;return"address_invalid"===(null===(t=e.s.checkout)||void 0===t?void 0:t.tax_status)||(null===(n=e.s.checkout)||void 0===n?void 0:n.shipping_enabled)||(null===(i=e.s.checkout)||void 0===i?void 0:i.shipping_address_required)||(null===(o=null===e.s||void 0===e.s?void 0:e.s.checkout)||void 0===o?void 0:o.tax_enabled)}},3524:(t,n,i)=>{i.d(n,{a:()=>h,b:()=>u,c:()=>p,d:()=>f,e:()=>c,f:()=>_,g:()=>m,r:()=>g,u:()=>y});var e=i(1874),o=i(9964),a=i(3659),r=i(2538),d=i(5792);const u="surecart/v1/checkouts/",c=["line_items","line_item.price","line_item.fees","line_item.variant","variant.image","price.product","product.featured_product_media","product.product_collections","product_media.media","customer","customer.shipping_address","payment_intent","discount","discount.promotion","recommended_bumps","bump.price","current_upsell","product.variants","discount.coupon","shipping_address","tax_identifier","manual_payment_method","shipping_choices","shipping_choice.shipping_method"],s=(t={})=>{var n,i,o,a,r,d;return{live_mode:"test"!==e.s.mode,group_key:e.s.groupId,abandoned_checkout_enabled:e.s.abandonedCheckoutEnabled,metadata:{...(null==t?void 0:t.metadata)||{},...(null===(n=null===window||void 0===window?void 0:window.scData)||void 0===n?void 0:n.page_id)&&{page_id:null===(i=null===window||void 0===window?void 0:window.scData)||void 0===i?void 0:i.page_id},...(null===(o=null===e.s||void 0===e.s?void 0:e.s.product)||void 0===o?void 0:o.id)&&{buy_page_product_id:null===(a=null===e.s||void 0===e.s?void 0:e.s.product)||void 0===a?void 0:a.id},page_url:window.location.href},...(null===(r=null===e.s||void 0===e.s?void 0:e.s.checkout)||void 0===r?void 0:r.email)&&{email:null===(d=null===e.s||void 0===e.s?void 0:e.s.checkout)||void 0===d?void 0:d.email},...t}},l=(t={})=>{var n,i;return{...!!(null===e.s||void 0===e.s?void 0:e.s.formId)&&{form_id:null===e.s||void 0===e.s?void 0:e.s.formId},...!!(null===(n=null===e.s||void 0===e.s?void 0:e.s.product)||void 0===n?void 0:n.id)&&{product_id:null===(i=null===e.s||void 0===e.s?void 0:e.s.product)||void 0===i?void 0:i.id},...t}},v=(t,n="")=>{let i=t?`${u}${t}`:u;return i=`${i}${n}`,(0,r.a)(i,{expand:c})},m=async({id:t,query:n={}})=>await(0,o.a)({path:(0,r.a)(v(t),l(n))}),p=async({id:t=null,data:n={},query:i={}})=>{var a,u;return t=t||(0,d.g)(window.location.href,"checkout_id")||((null===(a=null===e.s||void 0===e.s?void 0:e.s.checkout)||void 0===a?void 0:a.id)?null===(u=null===e.s||void 0===e.s?void 0:e.s.checkout)||void 0===u?void 0:u.id:null),await(0,o.a)({method:t?"PATCH":"POST",path:(0,r.a)(v(t),l(i)),data:s(n)})},f=async({id:t,data:n={},query:i={}})=>await(0,o.a)({method:"PATCH",path:(0,r.a)(v(t),l(i)),data:s(n)}),_=async({id:t,data:n={},query:i={},processor:e})=>await(0,o.a)({method:"POST",path:(0,r.a)(v(t,"/finalize"),l({...(null==e?void 0:e.manual)?{manual_payment:!0,manual_payment_method_id:null==e?void 0:e.id}:{processor_type:null==e?void 0:e.id},...i})),data:s(n)}),h=async({checkout:t,data:n,live_mode:i=!1})=>{var e;const a=((null===(e=null==t?void 0:t.line_items)||void 0===e?void 0:e.data)||[]).find((t=>{var i;return(null===(i=null==t?void 0:t.variant)||void 0===i?void 0:i.id)?t.variant.id===n.variant&&t.price.id===n.price:t.price.id===n.price}));if(!(null==t?void 0:t.id))return await(0,o.a)({method:"POST",path:(0,r.a)(v(null)),data:{line_items:[n],live_mode:i}});if(a)return await y({id:null==a?void 0:a.id,data:{...n,quantity:(null==a?void 0:a.quantity)+(null==n?void 0:n.quantity)}});const d=await(0,o.a)({path:(0,r.a)(`surecart/v1/line_items/${(null==a?void 0:a.id)?null==a?void 0:a.id:""}`,{consolidate:!0,expand:[...(c||[]).map((t=>t.includes(".")?t:`checkout.${t}`)),"checkout"]}),method:"POST",data:{...n,checkout:t.id}});return null==d?void 0:d.checkout},g=async({checkoutId:t,itemId:n})=>{const{deleted:i}=await(0,o.a)({path:`surecart/v1/line_items/${n}`,method:"DELETE"});if(!i)throw{code:"error",message:(0,a._)("Failed to delete","surecart")};return await m({id:t})},y=async({id:t,data:n})=>{const i=await(0,o.a)({path:(0,r.a)(`surecart/v1/line_items/${t}`,{expand:[...(c||[]).map((t=>t.includes(".")?t:`checkout.${t}`)),"checkout"]}),method:"PATCH",data:n});return null==i?void 0:i.checkout}},2768:(t,n,i)=>{i.d(n,{u:()=>d});var e=i(2853),o=i(8445);const a=(0,e.v)(e.c);a.subscribe((t=>e.s.formState=t)),a.start(),(0,e.o)("formState",(()=>{const{formState:t}=e.s,{value:n}=t;void 0!==e.s.text.loading[n]&&(0,o.s)(e.s.text.loading[n],"assertive")}));const{send:r}=a,d=t=>r(t)},5444:(t,n,i)=>{i.d(n,{a:()=>p,c:()=>m,r:()=>f,s:()=>r});var e=i(3659),o=i(8445);const a=(0,i(2574).c)({type:"default",code:"",message:"",data:{status:0,type:"",http_status:""},additional_errors:[],dismissible:!1},((t,n)=>JSON.stringify(t)!==JSON.stringify(n))),{state:r,onChange:d,on:u,dispose:c,forceUpdate:s}=a,l={dismissible:!1},v=(t,n,i=l)=>{"string"==typeof n&&(n={type:t,message:n,code:""}),(null==n?void 0:n.message)||(n.message=(0,e._)("Something went wrong. Please try again.","surecart")),r.type=t,n={...i,...n},(0,o.s)(n.message,"assertive"),Object.keys(n).forEach((t=>{r[t]=n[t]}))},m=(t,n=l)=>{v("error",t,n)},p=(t,n=l)=>{v("info",t,n)},f=()=>{r.type="default",r.code="",r.message="",r.data={status:0,type:"",http_status:""},r.additional_errors=[]}},8175:(t,n,i)=>{i.d(n,{a:()=>v,b:()=>c,c:()=>d,l:()=>u,r:()=>l,u:()=>s});var e=i(1874),o=i(2768),a=i(5444),r=i(3524);const d=()=>(0,e.c)(e.s.formId,e.s.mode),u=t=>e.s.locks=[...e.s.locks,t],c=(t="")=>e.s.locks=t?e.s.locks.filter((n=>n!==t)):[],s=async({id:t,data:n})=>{try{(0,o.u)("FETCH"),e.s.checkout=await(0,r.u)({id:t,data:n}),(0,o.u)("RESOLVE")}catch(t){console.error(t),(0,a.c)(t),(0,o.u)("REJECT")}},l=async t=>{try{(0,o.u)("FETCH"),e.s.checkout=await(0,r.r)({checkoutId:e.s.checkout.id,itemId:t}),(0,o.u)("RESOLVE")}catch(t){console.error(t),(0,a.c)(t),(0,o.u)("REJECT")}},v=async t=>{try{(0,o.u)("FETCH"),e.s.checkout=await(0,r.a)({checkout:e.s.checkout,data:t,live_mode:"live"===(null===e.s||void 0===e.s?void 0:e.s.mode)}),(0,o.u)("RESOLVE")}catch(t){console.error(t),(0,a.c)(t),(0,o.u)("REJECT")}}},2853:(t,n,i)=>{i.d(n,{c:()=>h,o:()=>k,s:()=>y,v:()=>_});var e,o=i(2574),a=i(3659),r=i(4904);function d(t,n){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var e,o,a=i.call(t),r=[];try{for(;(void 0===n||n-- >0)&&!(e=a.next()).done;)r.push(e.value)}catch(t){o={error:t}}finally{try{e&&!e.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}return r}!function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"}(e||(e={}));var u={type:"xstate.init"};function c(t){return void 0===t?[]:[].concat(t)}function s(t,n){return"string"==typeof(t="string"==typeof t&&n&&n[t]?n[t]:t)?{type:t}:"function"==typeof t?{type:t.name,exec:t}:t}function l(t){return function(n){return t===n}}function v(t){return"string"==typeof t?{type:t}:t}function m(t,n){return{value:t,context:n,actions:[],changed:!1,matches:l(t)}}function p(t,n,i){var e=n,o=!1;return[t.filter((function(t){if("xstate.assign"===t.type){o=!0;var n=Object.assign({},e);return"function"==typeof t.assignment?n=t.assignment(e,i):Object.keys(t.assignment).forEach((function(o){n[o]="function"==typeof t.assignment[o]?t.assignment[o](e,i):t.assignment[o]})),e=n,!1}return!0})),e,o]}var f=function(t,n){return t.actions.forEach((function(i){var e=i.exec;return e&&e(t.context,n)}))};function _(t){var n=t.initialState,i=e.NotStarted,o=new Set,a={_machine:t,send:function(a){i===e.Running&&(n=t.transition(n,a),f(n,v(a)),o.forEach((function(t){return t(n)})))},subscribe:function(t){return o.add(t),t(n),{unsubscribe:function(){return o.delete(t)}}},start:function(o){if(o){var r="object"==typeof o?o:{context:t.config.context,value:o};n={value:r.value,actions:[],context:r.context,matches:l(r.value)}}return i=e.Running,f(n,u),a},stop:function(){return i=e.Stopped,o.clear(),a},get state(){return n},get status(){return i}};return a}const h=function(t,n){void 0===n&&(n={});var i=d(p(c(t.states[t.initial].entry).map((function(t){return s(t,n.actions)})),t.context,u),2),e=i[0],o=i[1],a={config:t,_options:n,initialState:{value:t.initial,actions:e,context:o,matches:l(t.initial)},transition:function(n,i){var e,o,r="string"==typeof n?{value:n,context:t.context}:n,u=r.value,f=r.context,_=v(i),h=t.states[u];if(h.on){var g=c(h.on[_.type]);try{for(var y=function(t){var n="function"==typeof Symbol&&Symbol.iterator,i=n&&t[n],e=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(g),k=y.next();!k.done;k=y.next()){var E=k.value;if(void 0===E)return m(u,f);var b="string"==typeof E?{target:E}:E,w=b.target,x=b.actions,S=void 0===x?[]:x,O=b.cond,R=void 0===O?function(){return!0}:O,T=void 0===w,C=t.states[null!=w?w:u];if(R(f,_)){var P=d(p((T?c(S):[].concat(h.exit,S,C.entry).filter((function(t){return t}))).map((function(t){return s(t,a._options.actions)})),f,_),3),I=P[0],J=P[1],N=P[2],D=null!=w?w:u;return{value:D,context:J,actions:I,changed:w!==u||I.length>0||N,matches:l(D)}}}}catch(t){e={error:t}}finally{try{k&&!k.done&&(o=y.return)&&o.call(y)}finally{if(e)throw e.error}}}return m(u,f)}};return a}({id:"fetch",initial:"draft",context:{retries:3},states:{draft:{on:{PAID:"confirming",FINALIZE:"finalizing",FETCH:"updating",REJECT:"draft"}},updating:{on:{RESOLVE:"draft",EXPIRE:"expired",REJECT:"draft"}},finalizing:{on:{PAYING:"paying",REJECT:"draft",PAID:"confirming"}},paying:{on:{PAID:"confirming",REJECT:"draft"}},confirming:{on:{CONFIRMED:"confirmed"}},paid:{on:{CONFIRMED:"confirmed",REDIRECT:"redirecting",REJECT:"draft"}},expired:{},confirmed:{on:{REDIRECT:"redirecting"}},redirecting:{},failure:{on:{RETRY:{target:"updating",actions:{type:"xstate.assign",assignment:{retries:t=>t.retries+1}}}}}}}),{form:g}=(0,r.g)(),{state:y,onChange:k,on:E,set:b,get:w,dispose:x}=(0,o.c)({formState:h.initialState,text:{loading:{finalizing:(0,a._)("Submitting...","surecart"),paying:(0,a._)("Processing...","surecart"),confirming:(0,a._)("Finalizing...","surecart"),confirmed:(0,a._)("Success!","surecart"),redirecting:(0,a._)("Success! Redirecting...","surecart")},success:{title:(0,a._)("Thank you!","surecart"),description:(0,a._)("Your payment was successful. A receipt is on its way to your inbox.","surecart"),button:(0,a._)("Continue","surecart")}},...g},((t,n,i)=>"formState"===i?t.value!==n.value:JSON.stringify(t)!==JSON.stringify(n)))},7421:(t,n,i)=>{i.d(n,{a:()=>o,b:()=>e,g:()=>r,i:()=>d,s:()=>a});const e=t=>{let n;try{n=new URL(t)}catch(t){return!1}return"http:"===n.protocol||"https:"===n.protocol},o=t=>{const n=window.location.search;return new URLSearchParams(n).get(t)},a=(t,n,i)=>(t||[]).sort(((t,e)=>-1===i.indexOf(null==t?void 0:t[n])?1:-1===i.indexOf(null==e?void 0:e[n])?-1:i.indexOf(null==t?void 0:t[n])-i.indexOf(null==e?void 0:e[n]))),r=({variants:t,values:n})=>{const i=Object.keys(n);for(const e of t){const t=["option_1","option_2","option_3"].map((t=>e[t])).filter((t=>null!=t));if((null==t?void 0:t.length)===(null==i?void 0:i.length)&&i.every((i=>t.includes(n[i]))))return e}return null},d=(t,n)=>{const i=parseInt(t);return!(n&&((null==n?void 0:n.ad_hoc_max_amount)||(null==n?void 0:n.ad_hoc_min_amount))&&((null==n?void 0:n.ad_hoc_max_amount)&&i>(null==n?void 0:n.ad_hoc_max_amount)||(null==n?void 0:n.ad_hoc_min_amount)&&i<(null==n?void 0:n.ad_hoc_min_amount)))}},2685:(t,n,i)=>{i.d(n,{c:()=>h,s:()=>l,u:()=>g});var e=i(2574),o=i(4904),a=i(2286),r=i(7421),d=i(8175),u=i(1874);const{productDonation:c}=(0,o.g)(),s=Object.keys(c||{}).reduce(((t,n)=>{var i;const e=(0,a.g)(n);return(null==e?void 0:e.id)&&(t[n]={...t[n],...(null==e?void 0:e.ad_hoc_amount)?{ad_hoc_amount:e.ad_hoc_amount}:{},...(null==e?void 0:e.price)?{selectedPrice:e.price}:{},custom_amount:(null===(i=t[n].amounts||[])||void 0===i?void 0:i.includes(e.ad_hoc_amount))?null:e.ad_hoc_amount}),t}),c),{state:l,onChange:v,on:m,set:p,get:f,dispose:_}=(0,e.c)({...s},((t,n)=>JSON.stringify(t)!==JSON.stringify(n))),h=t=>{const n=l[t];return(n.amounts||[]).filter((t=>(0,r.i)(t,n.selectedPrice)))},g=(t,n)=>{l[t]={...l[t],...n}};(0,u.o)("checkout",(()=>{Object.keys(l).forEach((t=>{var n;const i=(0,a.g)(t);if(i)return p(t,{...l[t],selectedPrice:i.price,ad_hoc_amount:i.ad_hoc_amount,custom_amount:(null===(n=l[t].amounts||[])||void 0===n?void 0:n.includes(i.ad_hoc_amount))?null:i.ad_hoc_amount});p(t,{...l[t],selectedPrice:null,ad_hoc_amount:null,custom_amount:null})}))})),Object.keys(l).forEach((t=>{m("set",((n,i,e)=>{var o,u,c,s,v,m;if(n===t&&((null==i?void 0:i.selectedPrice)||(null==i?void 0:i.ad_hoc_amount)||(null==i?void 0:i.custom_amount))&&((null===(o=null==i?void 0:i.selectedPrice)||void 0===o?void 0:o.id)!==(null===(u=null==e?void 0:e.selectedPrice)||void 0===u?void 0:u.id)||(null==i?void 0:i.ad_hoc_amount)!==(null==e?void 0:e.ad_hoc_amount)||(null==i?void 0:i.custom_amount)!==(null==e?void 0:e.custom_amount))){const n=(null==i?void 0:i.custom_amount)&&(0,r.i)(null==i?void 0:i.custom_amount,i.selectedPrice)?null==i?void 0:i.custom_amount:(t=>{const n=l[t],i=(n.amounts||[]).filter((t=>(0,r.i)(t,n.selectedPrice)));return i.includes(null==n?void 0:n.ad_hoc_amount)?null==n?void 0:n.ad_hoc_amount:i[0]})(t),e=(null===(c=i.selectedPrice)||void 0===c?void 0:c.id)||(null===(m=null===(v=null===(s=i.product)||void 0===s?void 0:s.prices)||void 0===v?void 0:v.data.find((t=>null==t?void 0:t.ad_hoc)))||void 0===m?void 0:m.id);if(!e)return;((t,n)=>{const i=(0,a.g)(t);(null==i?void 0:i.id)?(0,d.u)({id:i.id,data:{...{price:i.price.id,...(null==i?void 0:i.ad_hoc_amount)?{ad_hoc_amount:null==i?void 0:i.ad_hoc_amount}:{}},...n}}):(0,d.a)(n)})(t,{price:e,quantity:1,ad_hoc_amount:n})}}))}))}}]);