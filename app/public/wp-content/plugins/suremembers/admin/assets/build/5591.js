"use strict";(globalThis.webpackChunksuremembers=globalThis.webpackChunksuremembers||[]).push([[5591],{403:(t,e,n)=>{n.d(e,{i:()=>i,m:()=>r,z:()=>o});const o=["bif","byr","clp","djf","gnf","isk","jpy","kmf","krw","pyg","rwf","ugx","vnd","vuv","xaf","xag","xau","xba","xbb","xbc","xbd","xdr","xof","xpd","xpf","xpt","xts"],r=(t,e)=>i(e)?t:t/100,i=t=>{var e;return o.includes(null===(e=null==t?void 0:t.toLowerCase)||void 0===e?void 0:e.call(t))}},8445:(t,e,n)=>{n.d(e,{s:()=>a});var o=n(7808);function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"polite",e=document.createElement("div");e.id="a11y-speak-".concat(t),e.className="a11y-speak-region",e.setAttribute("style","position: absolute;margin: -1px;padding: 0;height: 1px;width: 1px;overflow: hidden;clip: rect(1px, 1px, 1px, 1px);-webkit-clip-path: inset(50%);clip-path: inset(50%);border: 0;word-wrap: normal !important;"),e.setAttribute("aria-live",t),e.setAttribute("aria-relevant","additions text"),e.setAttribute("aria-atomic","true");var n=document,o=n.body;return o&&o.appendChild(e),e}n(3659);var i,s="";function a(t,e){!function(){for(var t=document.getElementsByClassName("a11y-speak-region"),e=document.getElementById("a11y-speak-intro-text"),n=0;n<t.length;n++)t[n].textContent="";e&&e.setAttribute("hidden","hidden")}(),t=function(t){return t=t.replace(/<[^<>]+>/g," "),s===t&&(t+=" "),s=t,t}(t);var n=document.getElementById("a11y-speak-intro-text"),o=document.getElementById("a11y-speak-assertive"),r=document.getElementById("a11y-speak-polite");o&&"assertive"===e?o.textContent=t:r&&(r.textContent=t),n&&n.removeAttribute("hidden")}i=function(){var t=document.getElementById("a11y-speak-intro-text"),e=document.getElementById("a11y-speak-assertive"),n=document.getElementById("a11y-speak-polite");null===t&&function(){var t=document.createElement("p");t.id="a11y-speak-intro-text",t.className="a11y-speak-intro-text",t.textContent=(0,o._)("Notifications"),t.setAttribute("style","position: absolute;margin: -1px;padding: 0;height: 1px;width: 1px;overflow: hidden;clip: rect(1px, 1px, 1px, 1px);-webkit-clip-path: inset(50%);clip-path: inset(50%);border: 0;word-wrap: normal !important;"),t.setAttribute("hidden","hidden");var e=document.body;e&&e.appendChild(t)}(),null===e&&r("assertive"),null===n&&r("polite")},"undefined"!=typeof document&&("complete"!==document.readyState&&"interactive"!==document.readyState?document.addEventListener("DOMContentLoaded",i):i())},2789:(t,e,n)=>{function o(){return"rtl"===document.dir}n.d(e,{i:()=>o})},6338:(t,e,n)=>{n.d(e,{a:()=>p,b:()=>v,c:()=>s,d:()=>a,g:()=>i,i:()=>l,p:()=>h,t:()=>u});var o=n(3659),r=n(403);const i=t=>(null==t?void 0:t.amount_off)&&(null==t?void 0:t.currency)?s({amount:t.amount_off,currency:t.currency}):(null==t?void 0:t.percent_off)?(0,o.s)((0,o._)("%1d%% off","surecart"),0|t.percent_off):"",s=({amount:t,currency:e})=>{const n=((t,e)=>r.z.includes(e)?t:t/100)(t,e);return`${new Intl.NumberFormat(void 0,{style:"currency",currency:e}).format(parseFloat(n.toFixed(2)))}`},a=(t="usd")=>{var e;return null===(e=new Intl.NumberFormat(void 0,{style:"currency",currency:t}).formatToParts().find((t=>"currency"===t.type)))||void 0===e?void 0:e.value},u=(t,e,n=(0,o._)("every","surecart"),r=(0,o._)("once","surecart"),i=!1)=>{switch(e){case"day":return`${n} ${(0,o.s)(i?(0,o.a)("%d day","%d days",t,"surecart"):(0,o.a)("day","%d days",t,"surecart"),t)}`;case"week":return`${n} ${(0,o.s)(i?(0,o.a)("%d week","%d weeks",t,"surecart"):(0,o.a)("week","%d weeks",t,"surecart"),t)}`;case"month":return`${n} ${(0,o.s)(i?(0,o.a)("%d month","%d months",t,"surecart"):(0,o.a)("month","%d months",t,"surecart"),t)}`;case"year":return`${n} ${(0,o.s)(i?(0,o.a)("%d year","%d years",t,"surecart"):(0,o.a)("year","%d years",t,"surecart"),t)}`;default:return r}},l=(t,e={})=>{if(!t)return"";const{showOnce:n,labels:r,abbreviate:i}=e,{interval:s=(0,o._)("every","surecart")}=r||{};return`${c(t,s,n?(0,o._)("once","surecart"):"",i)} ${d(t,i)}`},c=(t,e,n=(0,o._)("once","surecart"),r=!1)=>t.recurring_interval_count&&t.recurring_interval&&1!==(null==t?void 0:t.recurring_period_count)?r?((t,e,n=(0,o._)("once","surecart"),r=!1)=>{switch(e){case"day":return` / ${(0,o.s)(r?(0,o.a)("%d day","%d days",t,"surecart"):(0,o.a)("day","%d days",t,"surecart"),t)}`;case"week":return` / ${(0,o.s)(r?(0,o.a)("%d wk","%d wks",t,"surecart"):(0,o.a)("wk","%d wks",t,"surecart"),t)}`;case"month":return` / ${(0,o.s)(r?(0,o.a)("%d mo","%d months",t,"surecart"):(0,o.a)("mo","%d mos",t,"surecart"),t)}`;case"year":return` / ${(0,o.s)(r?(0,o.a)("%d yr","%d yrs",t,"surecart"):(0,o.a)("yr","%d yrs",t,"surecart"),t)}`;default:return n}})(t.recurring_interval_count,t.recurring_interval,n):u(t.recurring_interval_count,t.recurring_interval,` ${e}`,n):"",d=(t,e=!1)=>(null==t?void 0:t.recurring_period_count)&&1!==(null==t?void 0:t.recurring_period_count)?e?`x ${t.recurring_period_count}`:` (${(0,o.s)((0,o.a)("%d payment","%d payments",t.recurring_period_count,"surecart"),t.recurring_period_count)})`:"",p=t=>(0,o.s)((0,o.a)("%d payment remaining","%d payments remaining",t,"surecart"),t),h=t=>{var e;return t?`${null===(e=null==t?void 0:t.product)||void 0===e?void 0:e.name} ${(null==t?void 0:t.name)?`— ${t.name}`:""}`:""},v=t=>{switch(t){case"invalid":return(0,o._)("Not valid","surecart");case"expired":return(0,o._)("Expired","surecart");case"gone":return(0,o._)("Not available","surecart");case"less_than_min_subtotal_amount":return(0,o._)("Minimum not met","surecart");case"not_applicable":return(0,o._)("Product(s) not eligible","surecart");case"not_applicable_to_customer":return(0,o._)("Not eligible","surecart");case"":return"";default:return(0,o._)("Not redeemable","surecart")}}},5591:(t,e,n)=>{n.r(e),n.d(e,{sc_coupon_form:()=>u});var o=n(4589),r=n(8445),i=n(3659),s=n(2789),a=n(6338);n(7808),n(857);const u=class{constructor(t){(0,o.r)(this,t),this.scApplyCoupon=(0,o.c)(this,"scApplyCoupon",7),this.label=void 0,this.loading=void 0,this.busy=void 0,this.placeholder=void 0,this.error=void 0,this.forceOpen=void 0,this.discount=void 0,this.currency=void 0,this.discountAmount=void 0,this.showInterval=void 0,this.open=void 0,this.collapsed=void 0,this.value=void 0,this.buttonText=void 0}handleOpenChange(t){t&&setTimeout((()=>this.input.triggerFocus()),50)}handleDiscountChange(t,e){var n,o,s,u,l,c;if((null===(n=null==t?void 0:t.promotion)||void 0===n?void 0:n.code)!==(null===(o=null==e?void 0:e.promotion)||void 0===o?void 0:o.code)){if(null===(u=null===(s=null==this?void 0:this.discount)||void 0===s?void 0:s.promotion)||void 0===u?void 0:u.code){const e=(0,i.s)((0,i._)("Coupon code %1$s added. %2$s applied.","sc-coupon-form"),(null===(l=null==t?void 0:t.promotion)||void 0===l?void 0:l.code)||this.input.value||"",(0,a.g)(null===(c=null==this?void 0:this.discount)||void 0===c?void 0:c.coupon));(0,r.s)(e,"assertive")}else{const t=(0,i._)("Coupon code removed.","sc-coupon-form");(0,r.s)(t,"assertive")}setTimeout((()=>{var t,e;(null===(e=null===(t=null==this?void 0:this.discount)||void 0===t?void 0:t.promotion)||void 0===e?void 0:e.code)?this.couponTag.shadowRoot.querySelector("*").focus():this.addCouponTrigger.focus()}),50)}}handleBlur(){this.value||(this.open=!1,this.error="")}getHumanReadableDiscount(){var t,e,n;return(null===(t=null==this?void 0:this.discount)||void 0===t?void 0:t.coupon)&&(null===(e=null==this?void 0:this.discount)||void 0===e?void 0:e.coupon.percent_off)?(0,a.g)(null===(n=null==this?void 0:this.discount)||void 0===n?void 0:n.coupon):""}applyCoupon(){this.scApplyCoupon.emit(this.input.value.toUpperCase())}handleKeyDown(t){"Enter"===(null==t?void 0:t.code)?this.applyCoupon():"Escape"===(null==t?void 0:t.code)&&(this.scApplyCoupon.emit(null),this.open=!1,(0,r.s)((0,i._)("Coupon code field closed.","surecart"),"assertive"))}translateHumanDiscountWithDuration(t){var e;if(!this.showInterval)return t;const{duration:n,duration_in_months:o}=null===(e=this.discount)||void 0===e?void 0:e.coupon;switch(n){case"once":return`${t} ${(0,i._)("once","surecart")}`;case"repeating":const e=(0,i.s)((0,i.a)("%d month","%d months",o,"surecart"),o);return(0,i.s)((0,i._)("%s for %s","surecart"),t,e);default:return t}}render(){var t,e,n,u,l,c,d,p,h;if(this.loading)return(0,o.h)("sc-skeleton",{style:{width:"120px",display:"inline-block"}});if(null===(e=null===(t=null==this?void 0:this.discount)||void 0===t?void 0:t.promotion)||void 0===e?void 0:e.code){let t=this.getHumanReadableDiscount();return(0,o.h)("sc-line-item",{exportparts:"description:info, price-description:discount, price:amount"},(0,o.h)("span",{slot:"description"},(0,o.h)("div",{part:"discount-label"},(0,i._)("Discount","surecart")),(0,o.h)("sc-tag",{exportparts:"base:coupon-tag",type:"redeemable"===(null===(n=this.discount)||void 0===n?void 0:n.redeemable_status)?"success":"warning",class:"coupon-tag",clearable:!0,onScClear:()=>{this.scApplyCoupon.emit(null),this.open=!1},onKeyDown:t=>{"Enter"!==t.key&&"Escape"!==t.key||((0,r.s)((0,i._)("Coupon was removed.","surecart"),"assertive"),this.scApplyCoupon.emit(null),this.open=!1)},ref:t=>this.couponTag=t,role:"button","aria-label":(0,i.s)((0,i._)("Press enter to remove coupon code %s.","surecart"),(null===(l=null===(u=null==this?void 0:this.discount)||void 0===u?void 0:u.promotion)||void 0===l?void 0:l.code)||this.input.value||"")},null===(d=null===(c=null==this?void 0:this.discount)||void 0===c?void 0:c.promotion)||void 0===d?void 0:d.code)),"redeemable"===(null===(p=this.discount)||void 0===p?void 0:p.redeemable_status)?(0,o.h)(o.F,null,t&&(0,o.h)("span",{class:"coupon-human-discount",slot:"price-description"},this.translateHumanDiscountWithDuration(t)),(0,o.h)("span",{slot:"price"},(0,o.h)("sc-format-number",{type:"currency",currency:null==this?void 0:this.currency,value:null==this?void 0:this.discountAmount}))):(0,o.h)("div",{class:"coupon__status",slot:"price-description"},(0,o.h)("sc-icon",{name:"alert-triangle"}),(0,a.b)(null===(h=this.discount)||void 0===h?void 0:h.redeemable_status)))}return this.collapsed?(0,o.h)("div",{part:"base",class:{"coupon-form":!0,"coupon-form--is-open":this.open||this.forceOpen,"coupon-form--has-value":!!this.value,"coupon-form--is-rtl":(0,s.i)()}},(0,o.h)("div",{part:"label",class:"trigger",onMouseDown:()=>{this.open||(this.open=!0)},onKeyDown:t=>{if("Enter"!==t.key&&" "!==t.key)return!0;this.open||(this.open=!0,(0,r.s)((0,i._)("Coupon code field opened. Press Escape button to close it.","surecart"),"assertive"))},tabindex:"0",ref:t=>this.addCouponTrigger=t,role:"button"},(0,o.h)("slot",{name:"label"},this.label)),(0,o.h)("div",{class:"form",part:"form"},(0,o.h)("sc-input",{exportparts:"base:input__base, input, form-control:input__form-control",value:this.value,onScInput:t=>this.value=t.target.value,placeholder:this.placeholder,onScBlur:()=>this.handleBlur(),onKeyDown:t=>this.handleKeyDown(t),ref:t=>this.input=t,"aria-label":(0,i._)("Add coupon code.","surecart")},(0,o.h)("sc-button",{exportparts:"base:button__base, label:button_label",slot:"suffix",type:"text",loading:this.busy,size:"medium",class:"coupon-button",onClick:()=>this.applyCoupon()},(0,o.h)("slot",null,this.buttonText))),(0,o.h)("sc-button",{exportparts:"base:button__base, label:button_label",type:"primary",outline:!0,loading:this.busy,size:"medium",class:"coupon-button-mobile",onClick:()=>this.applyCoupon()},(0,o.h)("slot",null,this.buttonText)),!!this.error&&(0,o.h)("sc-alert",{exportparts:"base:error__base, icon:error__icon, text:error__text, title:error_title, message:error__message",type:"danger",open:!0},(0,o.h)("span",{slot:"title"},this.error))),this.loading&&(0,o.h)("sc-block-ui",{exportparts:"base:block-ui, content:block-ui__content"})):(0,o.h)("div",{class:{"coupon-form":!0,"coupon-form--has-value":!!this.value,"coupon-form--is-rtl":(0,s.i)()}},(0,o.h)("sc-input",{label:this.label,exportparts:"base:input__base, input, form-control:input__form-control",value:this.value,onScInput:t=>this.value=t.target.value,placeholder:this.placeholder,onScBlur:()=>this.handleBlur(),onKeyDown:t=>this.handleKeyDown(t),ref:t=>this.input=t},(0,o.h)("sc-button",{exportparts:"base:button__base, label:button_label",slot:"suffix",type:"text",loading:this.busy,size:"medium",class:"coupon-button",onClick:()=>this.applyCoupon()},(0,o.h)("slot",null,this.buttonText))),(0,o.h)("sc-button",{exportparts:"base:button__base, label:button_label",type:"primary",outline:!0,loading:this.busy,size:"medium",class:"coupon-button-mobile",onClick:()=>this.applyCoupon()},(0,o.h)("slot",null,this.buttonText)),!!this.error&&(0,o.h)("sc-alert",{exportparts:"base:error__base, icon:error__icon, text:error__text, title:error_title, message:error__message",type:"danger",open:!0},(0,o.h)("span",{slot:"title"},this.error)))}static get watchers(){return{open:["handleOpenChange"],discount:["handleDiscountChange"]}}};u.style=":host {\n  display: block;\n}\n\nsc-button {\n  color: var(--sc-color-primary-500);\n}\n\n.coupon-form {\n  position: relative;\n  container-type: inline-size;\n}\n.coupon-form .coupon-button {\n  opacity: 0;\n  visibility: hidden;\n  transform: scale(0.9);\n  transition: all var(--sc-transition-fast) ease;\n}\n.coupon-form .coupon-button-mobile {\n  margin-top: var(--sc-input-label-margin);\n  display: none;\n}\n.coupon-form--has-value .coupon-button {\n  opacity: 1;\n  visibility: visible;\n  transform: scale(1);\n}\n\n@container (max-width: 320px) {\n  .coupon-form .coupon-button {\n    display: none;\n  }\n  .coupon-form .coupon-button-mobile {\n    display: block;\n  }\n}\n.form {\n  opacity: 0;\n  visibility: hidden;\n  height: 0;\n  transform: translateY(5px);\n  transition: opacity var(--sc-transition-medium) ease, transform var(--sc-transition-medium) ease;\n  position: relative;\n  gap: var(--sc-spacing-small);\n}\n\n.coupon-form--is-open .form {\n  opacity: 1;\n  visibility: visible;\n  transform: translateY(0);\n  height: auto;\n  margin: var(--sc-spacing-small) 0;\n}\n.coupon-form--is-open .trigger {\n  display: none;\n}\n\n.trigger {\n  cursor: pointer;\n  font-size: var(--sc-font-size-small);\n  line-height: var(--sc-line-height-dense);\n  color: var(--sc-input-label-color);\n  user-select: none;\n}\n.trigger:hover {\n  text-decoration: underline;\n}\n\n.coupon-form--is-rtl .trigger {\n  text-align: right;\n}\n\n.coupon__status {\n  font-size: var(--sc-font-size-small);\n  line-height: var(--sc-line-height-dense);\n  color: var(--sc-color-warning-700);\n  display: inline-flex;\n  gap: var(--sc-spacing-x-small);\n  align-items: flex-start;\n  text-align: left;\n}\n.coupon__status sc-icon {\n  flex: 0 0 1em;\n  margin-top: 0.25em;\n}"}}]);