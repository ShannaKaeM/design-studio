"use strict";(globalThis.webpackChunksuremembers=globalThis.webpackChunksuremembers||[]).push([[8365],{403:(e,r,t)=>{t.d(r,{i:()=>n,m:()=>i,z:()=>s});const s=["bif","byr","clp","djf","gnf","isk","jpy","kmf","krw","pyg","rwf","ugx","vnd","vuv","xaf","xag","xau","xba","xbb","xbc","xbd","xdr","xof","xpd","xpf","xpt","xts"],i=(e,r)=>n(r)?e:e/100,n=e=>{var r;return s.includes(null===(r=null==e?void 0:e.toLowerCase)||void 0===r?void 0:r.call(e))}},7231:(e,r,t)=>{t.d(r,{o:()=>s});const s=(e,r)=>{new window.IntersectionObserver(((e,t)=>{e[0].intersectionRatio>0&&(r(),t.unobserve(e[0].target))})).observe(e)}},6338:(e,r,t)=>{t.d(r,{a:()=>p,b:()=>b,c:()=>o,d:()=>a,g:()=>n,i:()=>u,p:()=>h,t:()=>c});var s=t(3659),i=t(403);const n=e=>(null==e?void 0:e.amount_off)&&(null==e?void 0:e.currency)?o({amount:e.amount_off,currency:e.currency}):(null==e?void 0:e.percent_off)?(0,s.s)((0,s._)("%1d%% off","surecart"),0|e.percent_off):"",o=({amount:e,currency:r})=>{const t=((e,r)=>i.z.includes(r)?e:e/100)(e,r);return`${new Intl.NumberFormat(void 0,{style:"currency",currency:r}).format(parseFloat(t.toFixed(2)))}`},a=(e="usd")=>{var r;return null===(r=new Intl.NumberFormat(void 0,{style:"currency",currency:e}).formatToParts().find((e=>"currency"===e.type)))||void 0===r?void 0:r.value},c=(e,r,t=(0,s._)("every","surecart"),i=(0,s._)("once","surecart"),n=!1)=>{switch(r){case"day":return`${t} ${(0,s.s)(n?(0,s.a)("%d day","%d days",e,"surecart"):(0,s.a)("day","%d days",e,"surecart"),e)}`;case"week":return`${t} ${(0,s.s)(n?(0,s.a)("%d week","%d weeks",e,"surecart"):(0,s.a)("week","%d weeks",e,"surecart"),e)}`;case"month":return`${t} ${(0,s.s)(n?(0,s.a)("%d month","%d months",e,"surecart"):(0,s.a)("month","%d months",e,"surecart"),e)}`;case"year":return`${t} ${(0,s.s)(n?(0,s.a)("%d year","%d years",e,"surecart"):(0,s.a)("year","%d years",e,"surecart"),e)}`;default:return i}},u=(e,r={})=>{if(!e)return"";const{showOnce:t,labels:i,abbreviate:n}=r,{interval:o=(0,s._)("every","surecart")}=i||{};return`${d(e,o,t?(0,s._)("once","surecart"):"",n)} ${l(e,n)}`},d=(e,r,t=(0,s._)("once","surecart"),i=!1)=>e.recurring_interval_count&&e.recurring_interval&&1!==(null==e?void 0:e.recurring_period_count)?i?((e,r,t=(0,s._)("once","surecart"),i=!1)=>{switch(r){case"day":return` / ${(0,s.s)(i?(0,s.a)("%d day","%d days",e,"surecart"):(0,s.a)("day","%d days",e,"surecart"),e)}`;case"week":return` / ${(0,s.s)(i?(0,s.a)("%d wk","%d wks",e,"surecart"):(0,s.a)("wk","%d wks",e,"surecart"),e)}`;case"month":return` / ${(0,s.s)(i?(0,s.a)("%d mo","%d months",e,"surecart"):(0,s.a)("mo","%d mos",e,"surecart"),e)}`;case"year":return` / ${(0,s.s)(i?(0,s.a)("%d yr","%d yrs",e,"surecart"):(0,s.a)("yr","%d yrs",e,"surecart"),e)}`;default:return t}})(e.recurring_interval_count,e.recurring_interval,t):c(e.recurring_interval_count,e.recurring_interval,` ${r}`,t):"",l=(e,r=!1)=>(null==e?void 0:e.recurring_period_count)&&1!==(null==e?void 0:e.recurring_period_count)?r?`x ${e.recurring_period_count}`:` (${(0,s.s)((0,s.a)("%d payment","%d payments",e.recurring_period_count,"surecart"),e.recurring_period_count)})`:"",p=e=>(0,s.s)((0,s.a)("%d payment remaining","%d payments remaining",e,"surecart"),e),h=e=>{var r;return e?`${null===(r=null==e?void 0:e.product)||void 0===r?void 0:r.name} ${(null==e?void 0:e.name)?`â€” ${e.name}`:""}`:""},b=e=>{switch(e){case"invalid":return(0,s._)("Not valid","surecart");case"expired":return(0,s._)("Expired","surecart");case"gone":return(0,s._)("Not available","surecart");case"less_than_min_subtotal_amount":return(0,s._)("Minimum not met","surecart");case"not_applicable":return(0,s._)("Product(s) not eligible","surecart");case"not_applicable_to_customer":return(0,s._)("Not eligible","surecart");case"":return"";default:return(0,s._)("Not redeemable","surecart")}}},8365:(e,r,t)=>{t.r(r),t.d(r,{sc_subscription:()=>u});var s=t(4589),i=t(3659),n=t(9964),o=t(7231),a=t(6338),c=t(2538);t(857);const u=class{constructor(e){(0,s.r)(this,e),this.subscriptionId=void 0,this.showCancel=void 0,this.heading=void 0,this.query=void 0,this.protocol=void 0,this.subscription=void 0,this.updatePaymentMethodUrl=void 0,this.loading=void 0,this.cancelModal=void 0,this.resubscribeModal=void 0,this.busy=void 0,this.error=void 0}componentWillLoad(){(0,o.o)(this.el,(()=>{this.subscription||this.getSubscription()}))}async cancelPendingUpdate(){var e;if(confirm((0,i._)("Are you sure you want to cancel the pending update to your plan?","surecart")))try{this.busy=!0,this.subscription=await(0,n.a)({path:(0,c.a)(`surecart/v1/subscriptions/${null===(e=this.subscription)||void 0===e?void 0:e.id}/`,{expand:["price","price.product","current_period","period.checkout","purchase","purchase.license","license.activations","discount","discount.coupon"]}),method:"PATCH",data:{purge_pending_update:!0}})}catch(e){(null==e?void 0:e.message)?this.error=e.message:this.error=(0,i._)("Something went wrong","surecart"),console.error(this.error)}finally{this.busy=!1}}async renewSubscription(){var e;try{this.error="",this.busy=!0,this.subscription=await(0,n.a)({path:(0,c.a)(`surecart/v1/subscriptions/${null===(e=this.subscription)||void 0===e?void 0:e.id}/renew`,{expand:["price","price.product","current_period","period.checkout","purchase","purchase.license","license.activations","discount","discount.coupon"]}),method:"PATCH"})}catch(e){this.error=(null==e?void 0:e.message)||(0,i._)("Something went wrong","surecart")}finally{this.busy=!1}}async getSubscription(){var e;try{this.loading=!0,this.subscription=await await(0,n.a)({path:(0,c.a)(`surecart/v1/subscriptions/${this.subscriptionId||(null===(e=this.subscription)||void 0===e?void 0:e.id)}`,{expand:["price","price.product","current_period"],...this.query||{}})})}catch(e){(null==e?void 0:e.message)?this.error=e.message:this.error=(0,i._)("Something went wrong","surecart"),console.error(this.error)}finally{this.loading=!1}}renderName(e){var r;return"string"!=typeof(null===(r=null==e?void 0:e.price)||void 0===r?void 0:r.product)?(0,a.p)(null==e?void 0:e.price):(0,i._)("Subscription","surecart")}renderRenewalText(e){const r=(0,s.h)("sc-subscription-status-badge",{subscription:e});return(null==e?void 0:e.cancel_at_period_end)&&e.current_period_end_at?(0,s.h)("span",null,r," ",(0,i.s)((0,i._)("Your plan will be canceled on","surecart"))," ",(0,s.h)("sc-format-date",{date:1e3*e.current_period_end_at,month:"long",day:"numeric",year:"numeric"})):"trialing"===e.status&&e.trial_end_at?(0,s.h)("span",null,r," ",(0,i.s)((0,i._)("Your plan begins on","surecart"))," ",(0,s.h)("sc-format-date",{date:1e3*e.trial_end_at,month:"long",day:"numeric",year:"numeric"})):"active"===e.status&&e.current_period_end_at?(0,s.h)("span",null,r," ",(0,i.s)((0,i._)("Your plan renews on","surecart"))," ",(0,s.h)("sc-format-date",{date:1e3*e.current_period_end_at,month:"long",day:"numeric",year:"numeric"})):r}renderEmpty(){return(0,s.h)("slot",{name:"empty"},(0,i._)("This subscription does not exist.","surecart"))}renderLoading(){return(0,s.h)("sc-stacked-list-row",{style:{"--columns":"2"},"mobile-size":0},(0,s.h)("div",{style:{padding:"0.5em"}},(0,s.h)("sc-skeleton",{style:{width:"30%",marginBottom:"0.75em"}}),(0,s.h)("sc-skeleton",{style:{width:"20%",marginBottom:"0.75em"}}),(0,s.h)("sc-skeleton",{style:{width:"40%"}})))}renderContent(){return this.loading?this.renderLoading():this.subscription?(0,s.h)(s.F,null,(0,s.h)("sc-subscription-next-payment",{subscription:this.subscription},(0,s.h)("sc-subscription-details",{subscription:this.subscription}))):this.renderEmpty()}render(){var e,r,t,n,o,a;return(0,s.h)("sc-dashboard-module",{heading:this.heading||(0,i._)("Current Plan","surecart"),class:"subscription",error:this.error},!!this.subscription&&(0,s.h)("sc-flex",{slot:"end",class:"subscription__action-buttons"},this.updatePaymentMethodUrl&&(0,s.h)("sc-button",{type:"link",href:this.updatePaymentMethodUrl},(0,s.h)("sc-icon",{name:"credit-card",slot:"prefix"}),(0,i._)("Update Payment Method","surecart")),!!Object.keys(null===(e=this.subscription)||void 0===e?void 0:e.pending_update).length&&(0,s.h)("sc-button",{type:"link",onClick:()=>this.cancelPendingUpdate()},(0,s.h)("sc-icon",{name:"x-octagon",slot:"prefix"}),(0,i._)("Cancel Scheduled Update","surecart")),(null===(r=null==this?void 0:this.subscription)||void 0===r?void 0:r.cancel_at_period_end)?(0,s.h)("sc-button",{type:"link",onClick:()=>this.renewSubscription()},(0,s.h)("sc-icon",{name:"repeat",slot:"prefix"}),(0,i._)("Restore Plan","surecart")):"canceled"!==(null===(t=this.subscription)||void 0===t?void 0:t.status)&&(null===(n=this.subscription)||void 0===n?void 0:n.current_period_end_at)&&this.showCancel&&(0,s.h)("sc-button",{type:"link",onClick:()=>this.cancelModal=!0},(0,s.h)("sc-icon",{name:"x",slot:"prefix"}),(0,i._)("Cancel Plan","surecart")),"canceled"===(null===(o=this.subscription)||void 0===o?void 0:o.status)&&(0,s.h)("sc-button",{type:"link",...(null===(a=this.subscription)||void 0===a?void 0:a.payment_method)?{onClick:()=>this.resubscribeModal=!0}:{href:(0,c.a)(window.location.href,{action:"update_payment_method"})}},(0,s.h)("sc-icon",{name:"repeat",slot:"prefix"}),(0,i._)("Resubscribe","surecart"))),(0,s.h)("sc-card",{style:{"--overflow":"hidden"},noPadding:!0},this.renderContent()),this.busy&&(0,s.h)("sc-block-ui",{spinner:!0}),(0,s.h)("sc-cancel-dialog",{subscription:this.subscription,protocol:this.protocol,open:this.cancelModal,onScRequestClose:()=>this.cancelModal=!1,onScRefresh:()=>this.getSubscription()}),(0,s.h)("sc-subscription-reactivate",{subscription:this.subscription,open:this.resubscribeModal,onScRequestClose:()=>this.resubscribeModal=!1,onScRefresh:()=>this.getSubscription()}))}get el(){return(0,s.a)(this)}};u.style=":host{display:block}.subscription{display:grid;gap:0.5em}.subscription a{text-decoration:none;font-weight:var(--sc-font-weight-semibold);display:inline-flex;align-items:center;gap:0.25em;color:var(--sc-color-primary-500)}.subscription a.cancel{color:var(--sc-color-danger-500)}@media screen and (max-width: 720px){.subscription__action-buttons{--sc-flex-column-gap:var(--sc-spacing-xxx-small)}.subscription__action-buttons::part(base){flex-direction:column}.subscription__action-buttons sc-button::part(base){width:auto;height:2em}}"}}]);