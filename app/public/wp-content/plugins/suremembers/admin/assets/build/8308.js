"use strict";(globalThis.webpackChunksuremembers=globalThis.webpackChunksuremembers||[]).push([[8308],{7231:(e,t,s)=>{s.d(t,{o:()=>i});const i=(e,t)=>{new window.IntersectionObserver(((e,s)=>{e[0].intersectionRatio>0&&(t(),s.unobserve(e[0].target))})).observe(e)}},8308:(e,t,s)=>{s.r(t),s.d(t,{sc_license:()=>c});var i=s(4589),l=s(7231),n=s(3659),o=s(9964),a=s(2538);s(857);const c=class{constructor(e){(0,i.r)(this,e),this.deleteActivation=async()=>{try{this.busy=!0,await(0,o.a)({path:`surecart/v1/activations/${this.selectedActivationId}`,method:"DELETE"}),this.onCloseDeleteModal(),await this.initialFetch()}catch(e){console.error(e),this.deleteActivationError=(null==e?void 0:e.message)||(0,n._)("Something went wrong","surecart")}finally{this.busy=!1}},this.onCloseDeleteModal=()=>{this.selectedActivationId="",this.showConfirmDelete=!1,this.busy=!1,this.deleteActivationError=""},this.licenseId=void 0,this.loading=!1,this.error="",this.license=void 0,this.copied=!1,this.showConfirmDelete=!1,this.selectedActivationId="",this.deleteActivationError="",this.busy=!1}componentWillLoad(){(0,l.o)(this.el,(()=>{this.initialFetch()}))}async initialFetch(){try{this.loading=!0,await this.getLicense()}catch(e){console.error(e),this.error=(null==e?void 0:e.message)||(0,n._)("Something went wrong","surecart")}finally{this.loading=!1}}async getLicense(){this.license=await(0,o.a)({path:(0,a.a)(`surecart/v1/licenses/${this.licenseId}`,{expand:["activations","purchase","purchase.product"]})})}async copyKey(e){try{await navigator.clipboard.writeText(e),this.copied=!0,setTimeout((()=>{this.copied=!1}),2e3)}catch(e){console.error(e),alert((0,n._)("Error copying to clipboard","surecart"))}}renderStatus(){var e,t,s,l;return"active"===(null===(e=this.license)||void 0===e?void 0:e.status)?(0,i.h)("sc-tag",{type:"success"},(0,n._)("Active","surecart")):"revoked"===(null===(t=this.license)||void 0===t?void 0:t.status)?(0,i.h)("sc-tag",{type:"danger"},(0,n._)("Revoked","surecart")):"inactive"===(null===(s=this.license)||void 0===s?void 0:s.status)?(0,i.h)("sc-tag",{type:"info"},(0,n._)("Inactive","surecart")):(0,i.h)("sc-tag",{type:"info"},null===(l=this.license)||void 0===l?void 0:l.status)}renderLoading(){return(0,i.h)("sc-dashboard-module",null,(0,i.h)("span",{slot:"heading"},(0,i.h)("sc-skeleton",{style:{width:"120px"}})),(0,i.h)("sc-card",null,(0,i.h)("sc-stacked-list",null,(0,i.h)("sc-flex",{flexDirection:"column",style:{gap:"1em"}},(0,i.h)("sc-skeleton",{style:{width:"20%",display:"inline-block"}}),(0,i.h)("sc-skeleton",{style:{width:"60%",display:"inline-block"}}),(0,i.h)("sc-skeleton",{style:{width:"40%",display:"inline-block"}})))))}renderEmpty(){return(0,i.h)("sc-empty",{icon:"activity"},(0,n._)("License not found.","surecart"))}renderLicenseHeader(){var e;const t=null===(e=this.license)||void 0===e?void 0:e.purchase,s=null==t?void 0:t.product;return(0,i.h)(i.F,null,(0,i.h)("span",{slot:"heading"},(0,i.h)("div",{class:"license__heading"},null==s?void 0:s.name,!this.loading&&!t.live_mode&&(0,i.h)("sc-tag",{type:"warning",size:"small"},(0,n._)("Test Mode","surecart")))))}renderContent(){var e,t,s,l,o,a,c,r,d,h;return this.loading&&!(null===(e=this.license)||void 0===e?void 0:e.id)?this.renderLoading():(null===(t=this.license)||void 0===t?void 0:t.id)?(0,i.h)(i.F,null,(0,i.h)("sc-dashboard-module",{error:this.error},this.renderLicenseHeader(),(0,i.h)("sc-card",{noPadding:!0},(0,i.h)("sc-stacked-list",null,(0,i.h)("sc-stacked-list-row",{style:{"--columns":"2","--sc-stacked-list-row-align-items":"center"}},(0,i.h)("div",null,(0,n._)("License Status","surecart")),this.renderStatus()),(0,i.h)("sc-stacked-list-row",{style:{"--columns":"2"}},(0,i.h)("div",null,(0,n._)("License Key","surecart")),(0,i.h)("div",{class:"license__key"},(0,i.h)("sc-input",{value:null===(s=this.license)||void 0===s?void 0:s.key,readonly:!0},(0,i.h)("sc-button",{class:"license__copy",type:"default",size:"small",slot:"suffix",onClick:()=>{var e;return this.copyKey(null===(e=this.license)||void 0===e?void 0:e.key)}},this.copied?(0,n._)("Copied!","surecart"):(0,n._)("Copy","surecart"))))),(0,i.h)("sc-stacked-list-row",{style:{"--columns":"2"}},(0,i.h)("div",null,(0,n._)("Date","surecart")),(0,i.h)("sc-format-date",{date:null===(l=this.license)||void 0===l?void 0:l.created_at,type:"timestamp",month:"short",day:"numeric",year:"numeric"})),(0,i.h)("sc-stacked-list-row",{style:{"--columns":"2"}},(0,i.h)("div",null,(0,n._)("Activations Count","surecart")),(0,i.h)("span",null,null===(o=this.license)||void 0===o?void 0:o.activation_count," / ",(null===(a=this.license)||void 0===a?void 0:a.activation_limit)||(0,i.h)("span",null,"âˆž")))))),(0,i.h)("sc-dashboard-module",null,(0,i.h)("span",{slot:"heading"},(0,i.h)("slot",{name:"heading"},(0,n._)("Activations","surecart"))),(0,i.h)("sc-card",{noPadding:!0},(null===(d=null===(r=null===(c=this.license)||void 0===c?void 0:c.activations)||void 0===r?void 0:r.data)||void 0===d?void 0:d.length)?(0,i.h)("sc-stacked-list",null,null===(h=this.license)||void 0===h?void 0:h.activations.data.map((e=>(0,i.h)("sc-stacked-list-row",{style:{"--columns":"4"}},(0,i.h)("sc-format-date",{class:"license__date",date:e.created_at,type:"timestamp",month:"short",day:"numeric",year:"numeric"}),(0,i.h)("div",null,e.name),(0,i.h)("div",null,e.fingerprint),(0,i.h)("div",null,(0,i.h)("sc-button",{size:"small",onClick:()=>{this.selectedActivationId=e.id,this.showConfirmDelete=!0}},"Delete")))))):(0,i.h)("sc-empty",null,(0,n._)("No activations present.","surecart")),this.loading&&(0,i.h)("sc-block-ui",{style:{"--sc-block-ui-opacity":"0.75"},spinner:!0})))):this.renderEmpty()}renderConfirmDelete(){return(0,i.h)("sc-dialog",{open:this.showConfirmDelete,style:{"--body-spacing":"var(--sc-spacing-x-large)"},noHeader:!0,onScRequestClose:this.onCloseDeleteModal},(0,i.h)("sc-button",{class:"close__button",type:"text",circle:!0,onClick:this.onCloseDeleteModal,disabled:this.loading},(0,i.h)("sc-icon",{name:"x"})),(0,i.h)("sc-dashboard-module",{heading:(0,n._)("Delete Activation","surecart"),class:"license-cancel",error:this.error,style:{"--sc-dashboard-module-spacing":"1em"}},(0,i.h)("span",{slot:"description"},(0,n._)("Are you sure you want to delete activation?","surecart")),(0,i.h)("sc-flex",{justifyContent:"flex-start"},(0,i.h)("sc-button",{type:"primary",disabled:this.loading||this.busy,onClick:this.deleteActivation},(0,n._)("Delete Activation","surecart")),(0,i.h)("sc-button",{style:{color:"var(--sc-color-gray-500"},type:"text",onClick:this.onCloseDeleteModal,disabled:this.loading||this.busy},(0,n._)("Cancel","surecart"))),this.busy&&(0,i.h)("sc-block-ui",{style:{"--sc-block-ui-opacity":"0.75"},spinner:!0})))}render(){return(0,i.h)("sc-spacing",{style:{"--spacing":"var(--sc-spacing-large)"}},this.renderContent(),this.renderConfirmDelete())}get el(){return(0,i.a)(this)}};c.style=":host{display:block}.license__date{font-weight:var(--sc-font-weight-semibold)}.license__heading{display:flex;align-items:center;gap:1rem}.license__key{display:block}.close__button{position:absolute;top:0;right:0;font-size:22px;z-index:1}.license-cancel{display:grid;gap:0.5em}"}}]);