(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.element,r=window.wp.apiFetch;var n=e.n(r);const s=window.wp.components,l=window.wp.data,o=window.wp.i18n,c=e=>{let{link:r,title:n,onRequestClose:l}=e;return(0,t.createElement)(s.Modal,{className:"suremembers-modal",shouldCloseOnClickOutside:!1,title:n,isFullScreen:!0,onRequestClose:l},(0,t.createElement)("iframe",{title:(0,o.__)("Access Settings","suremembers"),id:"sureMembersbariFrame",width:"100%",height:"100%",src:r,frameBorder:"0",allowFullScreen:!0}))},u=()=>{const{nonce:e,all_access_url:r,new_access_url:u,ajax_url:a}=suremembers_edit,[i,m]=(0,t.useState)(!1),[d,p]=(0,t.useState)(""),[w,_]=(0,t.useState)([]),b=w.length>0?"#4338CA":"#000000",f=(0,t.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 112 112",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,t.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M56 112C86.9279 112 112 86.9279 112 56C112 25.0721 86.9279 0 56 0C25.0721 0 0 25.0721 0 56C0 86.9279 25.0721 112 56 112ZM56.2411 28C51.7446 28 45.5219 30.5715 42.3424 33.7436L33.7068 42.359H76.75L91.1427 28H56.2411ZM69.5851 78.2564C66.4055 81.4285 60.1828 84 55.6863 84H20.7848L35.1774 69.641H78.2206L69.5851 78.2564ZM83.5744 49.5385H26.5261L23.8313 52.2308C17.4505 57.9744 19.343 62.4616 28.279 62.4616H85.4818L88.1775 59.7693C94.4961 54.0595 92.5104 49.5385 83.5744 49.5385Z",fill:b})),C=(0,l.useSelect)((e=>e("core/editor").getCurrentPostId()),[]),h=(0,l.useSelect)((e=>e("core/editor").getCurrentPostType()),[]),E=(0,l.useSelect)((e=>e("core/editor").isSavingPost()),[]),g=(0,l.useSelect)((e=>e("core/editor").getPostTypeLabel()),[]),M=async()=>{const t=new FormData;return t.append("action","suremembers_edit_get_active_access_groups"),t.append("security",e),t.append("post_id",C),t.append("current_post_type",h),await n()({url:a,method:"POST",body:t}).then((e=>{e.success&&_(e.data.data)}))};return(0,t.useEffect)((()=>{null!==C&&M()}),[C,h,E]),(0,t.createElement)(t.Fragment,null,i&&(0,t.createElement)(c,{title:(0,o.sprintf)((0,o.__)("Restrict this %1$s","suremembers"),g),link:d,onRequestClose:()=>{m(!1),M()}}),(0,t.createElement)(s.DropdownMenu,{icon:f,label:(0,o.__)("SureMembers Access Groups","suremembers")},(e=>{let{}=e;return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(s.MenuGroup,null,w.length>0?w.map(((e,r)=>(0,t.createElement)(s.MenuItem,{onClick:()=>{p(e.href+"&suremembers_view=iframe"),m(!0)},key:r},e.title))):(0,t.createElement)(s.MenuItem,null,(0,o.sprintf)((0,o.__)("%1$s is not restricted","suremembers"),g)," ")),(0,t.createElement)(s.MenuGroup,null,(0,t.createElement)(s.MenuItem,{onClick:()=>{p(r),m(!0)}},(0,o.__)("All Access Groups","suremembers")),(0,t.createElement)(s.MenuItem,{onClick:()=>{p(u),m(!0)}},(0,o.__)("New Access Group","suremembers"))))})))};!function(e,r){const n=document.createElement("div");n.classList.add("suremembers-edit-root");const s=document.getElementById("editor");if(!s)return;const l=r.data.subscribe((function(){setTimeout((function(){if((0,t.render)((0,t.createElement)(u,null),n),!document.querySelector(".suremembers-edit-root")){const e=s.querySelector(".edit-post-header-toolbar");e instanceof HTMLElement&&e.appendChild(n)}}),1)}));document.querySelector(".suremembers-edit-root")&&l()}(window,wp)})();