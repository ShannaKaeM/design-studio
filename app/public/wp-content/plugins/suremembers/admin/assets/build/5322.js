/*! For license information please see 5322.js.LICENSE.txt */
"use strict";(globalThis.webpackChunksuremembers=globalThis.webpackChunksuremembers||[]).push([[5322],{4388:(t,e,i)=>{function a(t,e){void 0===e&&(e={});var i=document.createElement("script");return i.src=t,Object.keys(e).forEach((function(t){i.setAttribute(t,e[t]),"data-csp-nonce"===t&&i.setAttribute("nonce",e["data-csp-nonce"])})),i}function n(t,e){if(void 0===e&&(e=o()),s(t,e),"undefined"==typeof window)return e.resolve(null);var i=function(t){var e="https://www.paypal.com/sdk/js";t.sdkBaseURL&&(e=t.sdkBaseURL,delete t.sdkBaseURL),function(t){var e=t["merchant-id"],i=t["data-merchant-id"],a="",n="";Array.isArray(e)?e.length>1?(a="*",n=e.toString()):a=e.toString():"string"==typeof e&&e.length>0?a=e:"string"==typeof i&&i.length>0&&(a="*",n=i),t["merchant-id"]=a,t["data-merchant-id"]=n}(t);var i,a,n=Object.keys(t).filter((function(e){return void 0!==t[e]&&null!==t[e]&&""!==t[e]})).reduce((function(e,i){var a=t[i].toString();return"data-"===i.substring(0,5)?e.dataAttributes[i]=a:e.queryParams[i]=a,e}),{queryParams:{},dataAttributes:{}}),o=n.queryParams,r=n.dataAttributes;return{url:"".concat(e,"?").concat((i=o,a="",Object.keys(i).forEach((function(t){0!==a.length&&(a+="&"),a+=t+"="+i[t]})),a)),dataAttributes:r}}(t),n=i.url,d=i.dataAttributes,c=d["data-namespace"]||"paypal",l=r(c);return function(t,e){var i=document.querySelector('script[src="'.concat(t,'"]'));if(null===i)return null;var n=a(t,e),o=i.cloneNode();if(delete o.dataset.uidAuto,Object.keys(o.dataset).length!==Object.keys(n.dataset).length)return null;var r=!0;return Object.keys(o.dataset).forEach((function(t){o.dataset[t]!==n.dataset[t]&&(r=!1)})),r?i:null}(n,d)&&l?e.resolve(l):function(t,e){void 0===e&&(e=o()),s(t,e);var i=t.url,n=t.attributes;if("string"!=typeof i||0===i.length)throw new Error("Invalid url.");if(void 0!==n&&"object"!=typeof n)throw new Error("Expected attributes to be an object.");return new e((function(t,e){if("undefined"==typeof window)return t();!function(t){var e=t.onSuccess,i=t.onError,n=a(t.url,t.attributes);n.onerror=i,n.onload=e,document.head.insertBefore(n,document.head.firstElementChild)}({url:i,attributes:n,onSuccess:function(){return t()},onError:function(){var t=new Error('The script "'.concat(i,'" failed to load.'));return window.fetch?fetch(i).then((function(i){return 200===i.status&&e(t),i.text()})).then((function(t){var i=function(t){var e=t.split("/* Original Error:")[1];return e?e.replace(/\n/g,"").replace("*/","").trim():t}(t);e(new Error(i))})).catch((function(t){e(t)})):e(t)}})}))}({url:n,attributes:d},e).then((function(){var t=r(c);if(t)return t;throw new Error("The window.".concat(c," global variable is not available."))}))}function o(){if("undefined"==typeof Promise)throw new Error("Promise is undefined. To resolve the issue, use a Promise polyfill.");return Promise}function r(t){return window[t]}function s(t,e){if("object"!=typeof t||null===t)throw new Error("Expected an options object.");if(void 0!==e&&"function"!=typeof e)throw new Error("Expected PromisePonyfill to be a function.")}i.d(e,{g:()=>d,l:()=>n});const d=({clientId:t,reusable:e,merchantId:i,currency:a="usd",merchantInitiated:n})=>({"client-id":t.replace(/ /g,""),...!e||n?{"merchant-id":i.replace(/ /g,"")}:{},commit:!1,intent:e?"tokenize":"capture",vault:!0,currency:a?a.toUpperCase():"USD"})},3524:(t,e,i)=>{i.d(e,{a:()=>f,b:()=>d,c:()=>v,d:()=>m,e:()=>c,f:()=>y,g:()=>p,r:()=>g,u:()=>_});var a=i(1874),n=i(9964),o=i(3659),r=i(2538),s=i(5792);const d="surecart/v1/checkouts/",c=["line_items","line_item.price","line_item.fees","line_item.variant","variant.image","price.product","product.featured_product_media","product.product_collections","product_media.media","customer","customer.shipping_address","payment_intent","discount","discount.promotion","recommended_bumps","bump.price","current_upsell","product.variants","discount.coupon","shipping_address","tax_identifier","manual_payment_method","shipping_choices","shipping_choice.shipping_method"],l=(t={})=>{var e,i,n,o,r,s;return{live_mode:"test"!==a.s.mode,group_key:a.s.groupId,abandoned_checkout_enabled:a.s.abandonedCheckoutEnabled,metadata:{...(null==t?void 0:t.metadata)||{},...(null===(e=null===window||void 0===window?void 0:window.scData)||void 0===e?void 0:e.page_id)&&{page_id:null===(i=null===window||void 0===window?void 0:window.scData)||void 0===i?void 0:i.page_id},...(null===(n=null===a.s||void 0===a.s?void 0:a.s.product)||void 0===n?void 0:n.id)&&{buy_page_product_id:null===(o=null===a.s||void 0===a.s?void 0:a.s.product)||void 0===o?void 0:o.id},page_url:window.location.href},...(null===(r=null===a.s||void 0===a.s?void 0:a.s.checkout)||void 0===r?void 0:r.email)&&{email:null===(s=null===a.s||void 0===a.s?void 0:a.s.checkout)||void 0===s?void 0:s.email},...t}},u=(t={})=>{var e,i;return{...!!(null===a.s||void 0===a.s?void 0:a.s.formId)&&{form_id:null===a.s||void 0===a.s?void 0:a.s.formId},...!!(null===(e=null===a.s||void 0===a.s?void 0:a.s.product)||void 0===e?void 0:e.id)&&{product_id:null===(i=null===a.s||void 0===a.s?void 0:a.s.product)||void 0===i?void 0:i.id},...t}},h=(t,e="")=>{let i=t?`${d}${t}`:d;return i=`${i}${e}`,(0,r.a)(i,{expand:c})},p=async({id:t,query:e={}})=>await(0,n.a)({path:(0,r.a)(h(t),u(e))}),v=async({id:t=null,data:e={},query:i={}})=>{var o,d;return t=t||(0,s.g)(window.location.href,"checkout_id")||((null===(o=null===a.s||void 0===a.s?void 0:a.s.checkout)||void 0===o?void 0:o.id)?null===(d=null===a.s||void 0===a.s?void 0:a.s.checkout)||void 0===d?void 0:d.id:null),await(0,n.a)({method:t?"PATCH":"POST",path:(0,r.a)(h(t),u(i)),data:l(e)})},m=async({id:t,data:e={},query:i={}})=>await(0,n.a)({method:"PATCH",path:(0,r.a)(h(t),u(i)),data:l(e)}),y=async({id:t,data:e={},query:i={},processor:a})=>await(0,n.a)({method:"POST",path:(0,r.a)(h(t,"/finalize"),u({...(null==a?void 0:a.manual)?{manual_payment:!0,manual_payment_method_id:null==a?void 0:a.id}:{processor_type:null==a?void 0:a.id},...i})),data:l(e)}),f=async({checkout:t,data:e,live_mode:i=!1})=>{var a;const o=((null===(a=null==t?void 0:t.line_items)||void 0===a?void 0:a.data)||[]).find((t=>{var i;return(null===(i=null==t?void 0:t.variant)||void 0===i?void 0:i.id)?t.variant.id===e.variant&&t.price.id===e.price:t.price.id===e.price}));if(!(null==t?void 0:t.id))return await(0,n.a)({method:"POST",path:(0,r.a)(h(null)),data:{line_items:[e],live_mode:i}});if(o)return await _({id:null==o?void 0:o.id,data:{...e,quantity:(null==o?void 0:o.quantity)+(null==e?void 0:e.quantity)}});const s=await(0,n.a)({path:(0,r.a)(`surecart/v1/line_items/${(null==o?void 0:o.id)?null==o?void 0:o.id:""}`,{consolidate:!0,expand:[...(c||[]).map((t=>t.includes(".")?t:`checkout.${t}`)),"checkout"]}),method:"POST",data:{...e,checkout:t.id}});return null==s?void 0:s.checkout},g=async({checkoutId:t,itemId:e})=>{const{deleted:i}=await(0,n.a)({path:`surecart/v1/line_items/${e}`,method:"DELETE"});if(!i)throw{code:"error",message:(0,o._)("Failed to delete","surecart")};return await p({id:t})},_=async({id:t,data:e})=>{const i=await(0,n.a)({path:(0,r.a)(`surecart/v1/line_items/${t}`,{expand:[...(c||[]).map((t=>t.includes(".")?t:`checkout.${t}`)),"checkout"]}),method:"PATCH",data:e});return null==i?void 0:i.checkout}},5444:(t,e,i)=>{i.d(e,{a:()=>v,c:()=>p,r:()=>m,s:()=>r});var a=i(3659),n=i(8445);const o=(0,i(2574).c)({type:"default",code:"",message:"",data:{status:0,type:"",http_status:""},additional_errors:[],dismissible:!1},((t,e)=>JSON.stringify(t)!==JSON.stringify(e))),{state:r,onChange:s,on:d,dispose:c,forceUpdate:l}=o,u={dismissible:!1},h=(t,e,i=u)=>{"string"==typeof e&&(e={type:t,message:e,code:""}),(null==e?void 0:e.message)||(e.message=(0,a._)("Something went wrong. Please try again.","surecart")),r.type=t,e={...i,...e},(0,n.s)(e.message,"assertive"),Object.keys(e).forEach((t=>{r[t]=e[t]}))},p=(t,e=u)=>{h("error",t,e)},v=(t,e=u)=>{h("info",t,e)},m=()=>{r.type="default",r.code="",r.message="",r.data={status:0,type:"",http_status:""},r.additional_errors=[]}},5322:(t,e,i)=>{i.r(e),i.d(e,{sc_paypal_buttons:()=>c,sc_secure_notice:()=>l});var a=i(4589),n=i(4388),o=i(3659),r=i(9964),s=i(3524),d=i(5444);i(857),i(1874),i(2574),i(8445),i(7808);const c=class{constructor(t){(0,a.r)(this,t),this.scSetState=(0,a.c)(this,"scSetState",7),this.scPaid=(0,a.c)(this,"scPaid",7),this.clientId=void 0,this.busy=!1,this.merchantId=void 0,this.merchantInitiated=void 0,this.mode=void 0,this.order=void 0,this.buttons=["paypal","card"],this.label="paypal",this.color="gold",this.loaded=void 0}handleOrderChange(t,e){(null==t?void 0:t.updated_at)!==(null==e?void 0:e.updated_at)&&(this.cardContainer.innerHTML="",this.paypalContainer.innerHTML="",this.loadScript())}async loadScript(){var t,e;if(this.clientId&&this.merchantId)try{const i=await(0,n.l)((0,n.g)({clientId:this.clientId,merchantId:this.merchantId,merchantInitiated:this.merchantInitiated,reusable:null===(t=this.order)||void 0===t?void 0:t.reusable_payment_method_required,currency:null===(e=this.order)||void 0===e?void 0:e.currency}));this.renderButtons(i)}catch(t){console.error("failed to load the PayPal JS SDK script",t)}}componentDidLoad(){this.loadScript()}renderButtons(t){const e={onClick:async(t,e)=>{const i=this.el.closest("sc-checkout");return await i.validate()?e.resolve():e.reject()},onInit:()=>{this.loaded=!0},onCancel:()=>{this.scSetState.emit("REJECT")},onApprove:async()=>{var t,e,i,a;try{this.order=await(0,s.g)({id:null===(t=this.order)||void 0===t?void 0:t.id})}catch(t){console.error(t),(0,d.c)({code:"could_not_capture",message:(0,o._)("The payment did not process. Please try again.","surecart")}),this.scSetState.emit("REJECT")}try{this.scSetState.emit("PAYING");const t=await(0,r.a)({method:"PATCH",path:`surecart/v1/payment_intents/${(null===(i=null===(e=this.order)||void 0===e?void 0:e.payment_intent)||void 0===i?void 0:i.id)||(null===(a=this.order)||void 0===a?void 0:a.payment_intent)}/capture`});["succeeded","processing"].includes(null==t?void 0:t.status)?(this.scSetState.emit("PAID"),this.scPaid.emit()):((0,d.c)({code:"could_not_capture",message:(0,o._)("Payment processing failed. Kindly attempt the transaction once more.","surecart")}),this.scSetState.emit("REJECT"))}catch(t){console.error(t),(0,d.c)({code:"could_not_capture",message:(0,o._)("Payment processing failed. Kindly attempt the transaction once more.","surecart")}),this.scSetState.emit("REJECT")}},onError:t=>{console.error(t),(0,d.c)(t),this.scSetState.emit("REJECT")}};if(e[this.order.reusable_payment_method_required?"createBillingAgreement":"createOrder"]=async()=>new Promise((async(t,e)=>{var i,a;const n=this.el.closest("sc-checkout"),r=await n.submit();return r instanceof Error?e(r):"finalized"!==(null==r?void 0:r.status)?e(new Error("Something went wrong. Please try again.")):(null===(i=null==r?void 0:r.payment_intent)||void 0===i?void 0:i.external_intent_id)?t(null===(a=null==r?void 0:r.payment_intent)||void 0===a?void 0:a.external_intent_id):((0,d.c)({code:"missing_payment_intent",message:(0,o._)("Something went wrong. Please contact us for payment.","surecart")}),e())})),t.FUNDING.PAYPAL){const i=t.Buttons({fundingSource:t.FUNDING.PAYPAL,style:{label:this.label,color:this.color},...e});i.isEligible()&&i.render(this.paypalContainer)}if(t.FUNDING.CARD){const i=t.Buttons({fundingSource:t.FUNDING.CARD,style:{color:"black"},...e});i.isEligible()&&i.render(this.cardContainer)}}render(){return(0,a.h)("div",{part:`base ${this.busy||!this.loaded&&"base--busy"}`,class:{"paypal-buttons":!0,"paypal-buttons--busy":this.busy||!this.loaded}},(!this.loaded||this.busy)&&(0,a.h)("sc-skeleton",{style:{height:"55px","--border-radius":"4px",cursor:"wait"}}),(0,a.h)("div",{class:"sc-paypal-button-container",hidden:!this.loaded||this.busy},(0,a.h)("div",{part:"paypal-card-button",hidden:!this.buttons.includes("card"),class:"sc-paypal-card-button",ref:t=>this.cardContainer=t}),(0,a.h)("div",{part:"paypal-button",hidden:!this.buttons.includes("paypal"),class:"sc-paypal-button",ref:t=>this.paypalContainer=t})))}get el(){return(0,a.a)(this)}static get watchers(){return{order:["handleOrderChange"]}}};c.style=':host{display:block}.paypal-buttons{position:relative;line-height:0;text-align:center}.paypal-buttons:not(.paypal-buttons--busy):after{content:" ";border-bottom:1px solid var(--sc-input-border-color);width:100%;height:0;top:50%;left:0;right:0;position:absolute}';const l=class{constructor(t){(0,a.r)(this,t)}render(){return(0,a.h)("div",{class:"notice",part:"base"},(0,a.h)("svg",{class:"notice__icon",part:"icon",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 512 512",fill:"currentColor"},(0,a.h)("path",{d:"M368,192H352V112a96,96,0,1,0-192,0v80H144a64.07,64.07,0,0,0-64,64V432a64.07,64.07,0,0,0,64,64H368a64.07,64.07,0,0,0,64-64V256A64.07,64.07,0,0,0,368,192Zm-48,0H192V112a64,64,0,1,1,128,0Z"})),(0,a.h)("span",{class:"notice__text",part:"text"},(0,a.h)("slot",{name:"prefix"}),(0,a.h)("slot",null),(0,a.h)("slot",{name:"suffix"})))}};l.style=":host{display:block;--sc-secure-notice-icon-color:var(--sc-color-gray-300);--sc-secure-notice-font-size:var(--sc-font-size-small);--sc-secure-notice-color:var(--sc-color-gray-500)}.notice{color:var(--sc-secure-notice-color);font-size:var(--sc-secure-notice-font-size);display:flex;align-items:center;gap:5px}.notice__text{flex:1;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap}.notice__icon{color:var(--sc-secure-notice-icon-color);margin-right:5px}"}}]);